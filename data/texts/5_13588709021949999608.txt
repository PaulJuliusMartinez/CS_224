The Plan 9 File Server
Ken Thompson ken@plan9.bell-labs.com
ABSTRACT
6DEI F=FAH @AI?HE>AI JDA IJHK?JKHA =@ JDA FAH=JE B 2= ' BEA IAHLAHI 6DA IFA?EBE?I =FFO J KH =E 2= ' BEA IAHLAH -AEA >KJ JDA ?@AEI=IJDA>=IEIBHJDAKIAHALABEAIAHLAH kfs
Introduction 6DA 2= ' BEA IAHLAH -AEA EI JDA @AIJ FEA?A B IOIJA IBJM=HA IJE E KIA 
2= ' 1J ALLA@ BH = KIAHALA FHCH= JD=J IAHLA@ IAHE= EAI  = 5AGKAJ KJEFH?AIIH 6DA ?KHHAJ EFAAJ=JE EI AEJDAH ?A= H FHJ=>A >KJ EJ D=I IMO?AJJAHIMEJDEJIF=HJE?K=HIAJB?H=O?FKJAHI=@@ALE?AI
Process Structure 6DA 2= ' BEA IOIJA IAHLAH EI =@A BH = =?EAJ LAHIE B JDA 2= ' AHA
6DA AHA ?J=EI FH?AII ?JH IO?DHE=JE ?I =@ IA AHO =?= JE 6DAAHAD=IKIAHFH?AIIAIHLEHJK=AHO
6DA IJHK?JKHA B JDA BEA IOIJA IAHLAH EI = IAJ B AHA FH?AIIAI IO?DHEEC IJOJDHKCDAII=CAF=IIEC 1-AEAJDAHA=HA $FH?AIIAIBJOFAI
K>AH =A BK?JE # srv =E BEA IOIJA IAHLAH FH?AIIAI  rah *? HA=@=DA=@ FH?AIIAI  scp 5O? FH?AII  wcp 94 ?FO FH?AII  con +IA FH?AII  ilo 1 FHJ? FH?AII  ilt 1 JEAH FH?AII ethi -JDAHAJ EFKJ FH?AII etho -JDAHAJ KJFKJ FH?AII  flo .FFO @EI FH?AII
The server processes 6DA =E BEA IOIJA =CHEJD EI = IAJ B E@AJE?= FH?AIIAI =A@ srv JD=J
DH JDA '2 FHJ? -=?D BEA IOIJA FH?AII M=EJI  = AII=CA GKAKA BH = E?ECHAGKAIJ 6DAHAGKAIJ?J=EI='2AII=CA=@JDA=@@HAIIB=HAFO GKAKA ) srv FH?AII F=HIAI JDA AII=CA FAHBHI FIAK@@EI 1 J JDA ?HHAIF@EC BEA IOIJA >? @ALE?A BHK=JAI = HAIFIA =@ IA@I JDA HAIFIA >=? J JDA HAFO GKAKA
6DAKEJBIJH=CAEI=>?B@=J==@ALE?A



enum {
RBUFSIZE = 16*1024 };

typedef struct {
short short long } Tag;

pad; tag; path;

enum {
BUFSIZE = RBUFSIZE - sizeof(Tag) };

typedef struct {
uchar Tag } Block;

data[BUFSIZE]; tag;

) @ALE?AI =HA E@A=EA@ =I = FAHBA?J @EI B ?JECKKIO K>AHA@ >?I A=?D B IEA RBUFSIZE -=?D >? D=I = J=C JD=J E@AJEBEAI MD=J JOFA B >? EJ EI =@ = KEGKA E@ B JDA BEA H @EHA?JHO MDAHA JDEI >? HAIE@AI 6DA HA=EEC @=J= E JDA >? @AFA@IMD=JJOFAB>?EJEI
6DA srv FH?AIII =E @=J= IJHK?JKHA EI JDA @EHA?JHO AJHO 6DEI EI JDA AGKEL= AJ B = 71: E@A =@ @ABEAI JDA IAJ B >? =@@HAIIAI JD=J ?FHEIA = BEA H @EHA?JHO 7EA JDA E@A JDA @EHA?JHO AJHO =I D=I JDA =A B JDA BEA H @EHA? JHOEEJ

enum {
NAMELEN = 28, NDBLOCK = 6 };

typedef struct {
char short short ushort short Qid long long long long long long } Dentry;

name[NAMELEN]; uid; gid; mode; wuid; qid; size; dblock[NDBLOCK]; iblock; diblock; atime; mtime;

-=?D @EHA?JHO AJHO D@I JDA BEA H @EHA?JHO =A FHJA?JE @A =??AII JEAI KIAHE@ CHKFE@ =@ =@@HAIIEC EBH=JE 6DA AJHO wuid EI JDA KIAHE@ B JDA

!

=IJ MHEJAH B JDA BEA =@ size EI JDA IEA B JDA BEA E >OJAI 6DA BEHIJ $ >?I B JDA BEA =HA DA@ E JDA dblock =HH=O 1B JDA BEA EI =HCAH JD= JD=J = E@EHA?J >? EI = ?=JA@ JD=J D@I JDA ANJ BUFSIZE/sizeof(long) >?I B JDA BEA 6DA E@EHA?J >? =@@HAII EI DA@ E JDA IJHK?JKHA A>AH iblock 1B JDA BEA EI =HCAH OAJ JDA JDAHA EI = @K>A E@EHA?J >? JD=J FEJI =J E@EHA?J >?I 6DA @K>A E@EHA?J =@@HAII EI DA@ E diblock =@ ?= FEJ =J =JDAH (BUFSIZE/sizeof(long))2 >?I B @=J= 6DA =NEK =@@HAII=>A IEA B = BEA EI JDAHABHA %# />OJAI 6DAHA EI = JECDJAH HAIJHE?JE B ! >OJAI >A?=KIA JDA ACJD B = BEA EI =EJ=EA@ E = C -LA I IFFO KIA B C =HEJDAJE? HAIJHE?JI JDA ACJD J ! >OJAI 6DAIA K>AHI =HA >=IA@  -AEA MDE?D D=I = >? IEA B $ =@ sizeof(long) EI " 1J MK@ >A@EBBAHAJEBJDAIEAB=>??D=CA@
6DA@A?=H=JEIBJDAE@EHA?J=@@K>AE@EHA?J>?I=HA=IBMI
enum {
INDPERBUF = BUFSIZE/sizeof(long), };

typedef {
long Tag } Iblock;

dblock[INDPERBUF]; ibtag;

typedef {
long Tag } Diblock;

iblock[INDPERBUF]; dibtag;

6DA HJ B = BEA IOIJA EI = IECA @EHA?JHO AJHO =J = M >? =@@HAII ) @EHA?JHO EI = BEA JD=J ?IEIJI B = EIJ B @EHA?JHO AJHEAI 6 =A =??AII A=IEAH = @EHA?JHOAJHO?=J?HII>?I 1-AEAJDAHA=HA !!@EHA?JHOAJHEAIFAH>?
6DA @ALE?A  MDE?D JDA >?I HAIE@A EI EFE?EJ =@ KJE=JAO ?AI BH JDA '2 attach AII=CAJD=JIFA?EBEAIJDA=ABJDA@ALE?A?J=EECJDAHJ

Buffer Cache
9DA JDA BEA IAHLAH EI >JA@ = B JDA KKIA@ AHO EI =?=JA@ J = >? >KBBAH F 6DAHA =HA JM =H FAH=JEI  JDA >KBBAH F Getbuf ME BE@ JDA >KBBAH =II?E=JA@ MEJD = F=HJE?K=H >?  = F=HJE?K=H @ALE?A 6DA HAJKHA@ >KBBAH EI ?A@ I JD=J JDA ?=AH D=I AN?KIELA KIA 1B JDA HAGKAIJA@ >KBBAH EI J E JDA F IA JDAH >KBBAH ME >A HA=>AA@ =@ JDA @=J= ME >A HA=@ BH JDA HAGKAIJA@ @ALE?A Putbuf ME K? = >KBBAH =@ EB JDA ?JAJI =HA =HA@ =I @EBEA@ JDA >KBBAH ME >A MHEJJA J JDA @ALE?A >ABHA JDA >KBBAH EI HA=>AA@ 1B JDAHA EI IA IFA?E= =FFEC H +27 ?=?DA BKIDEC JD=J KIJ ??KH E H@AH BH JDA FDOIE?= 1 @ALE?A J =??AII JDA >KBBAHI JDEI EI @A >AJMAA getbuf =@ putbuf 6DA ?JAJI B = >KBBAH EI ALAH JK?DA@AN?AFJMDEAEJEI?A@>AJMAA getbuf =@ putbuf ?=I
6DA BEA IOIJA IAHLAH FH?AIIAI FHALAJ @A=@? E JDA >KBBAHI >O =M=OI ?EC F=HAJ =@ ?DE@ @EHA?JHO AJHEAI E JD=J H@AH 5E?A JDA AJEHA @EHA?JHO IJHK?JKHA EI = DEAH=H?DO JDEI =AI JDA ?EC MAH@AHA@ FHALAJEC @A=@? 6DA =H FH> A E JDA ?EC IJH=JACO EI JD=J ?I =HA =J = >? ALA =@ JDAHA =HA =O @EHA?JHO AJHEAI E = IECA >? 6DAHA =HA KA?AII=HO ? ?BE?JI E JDA @EHA?JHO >?I 9DA A B JDAIA @EHA?JHO >?I EI JEA@ KF =??AIIEC JDA LAHO IM 94 JDA = 1J@AIBKHA=JA@@EHA?JHEAIEI>?A@

"

Block Devices

6DA >? @ALE?A 1 IOIJA EI EA = FHJ? IJ=? B BEJAHI 6DAHA =HA = IAJ B FIAK@@ALE?AI JD=J ?= HA?KHIELAO J JDAH FIAK@@ALE?AI =@ HA= @ALE?AI 6DA FH J? IJ=? EI ?FEA@ BH = ?BECKH=JE IJHEC JD=J IFA?EBEAI JDA H@AH B FIAK@ @ALE?AI =@ @ALE?AI -=?D FIAK@@ALE?A =@ @ALE?A D=I = IAJ B AJHO FEJI JD=J ?H HAIF@I J JDA FAH=JEI JD=J JDA BEA IOIJA HAGKEHAI B = @ALE?A 6DA IJ J=>A FAH=JEI=HA read write=@ size

6DA @ALE?A IJ=? ?= >AIJ >A @AI?HE>A@ >O @AI?HE>EC JDA IOJ=N B JDA ?BECKH= JE IJHEC JD=J IFA?EBEAI JDA IJ=? +BECKH=JE IJHECI =HA KIA@ @KHEC JDA IAJKF B JDA BEA IOIJA .H = @AI?HEFJE IAA fsconfig& 1 JDA BMEC HA?KHIELA @ABEEJE D HAFHAIAJI=IJHECJD=JIFA?EBEAI=>?@ALE?A

D DD 6DEI EI = IAJ B @ALE?AI JD=J =HA ??=JA=JA@ J BH = IECA @ALE?A 6DA IEA B JDA?=JA=JA@@ALE?AEIJDAIKBJDAIEAIBA=?DIK>@ALE?A

D DD 6DEI EI JDA EJAHA=LEC B JDA E@ELE@K= @ALE?AI 1B JDAHA =HA  @ALE?AI E JDA EIJ JDA JDA FIAK@@ALE?A EI JDA M=O >? EJAHA=LEC B JDA IK>@ALE?AI 6DA IEABJDAEJAHA=LA@@ALE?AEIJEAIJDAIEABJDAI=AIJIK>@ALE?A

D  pDN1.N2 6DEI EI = F=HJEJE B = IK>@ALE?A 6DA IK>@ALE?A EI F=HJEJEA@ EJ  AGK= FEA?AI 1B JDA IEA B JDA IK>@ALE?A EI J @ELEIE>A >O  JDA JDAHA ME >A IA IF JDHM =M=O =J JDA JF 6DA FIAK@@ALE?A IJ=HJI =J JDA JD FEA?A =@?JEKAIBH FEA?AI6DKI pD67.33 ME>AJDA=IJJDEH@BJDA@ALE?A D

D  fD 6DEI EI = B=A MHEJA?AHA=@=O @ALE?A IEK=JA@ >O = IA?@ HA=@MHEJA @ALE?A 6DEI IA?@ @ALE?A EI F=HJEJEA@ EJ = IAJ B >? B=CI =@ = IAJ B >?I 6DA B=CI =HA KIA@ J CAAH=JA AHHHI EB = >? EI ALAH MHEJJA JME?A H HA=@MEJDKJ>AECMHEJJABEHIJ

D  cDD 6DEI EI JDA ?=?DA94 @ALE?A =@A KF B = ?=?DA HA=@MHEJA @ALE?A =@ = 94MHEJA?AHA=@=O@ALE?A HAJDEI=JAH

Do 6DEI EI JDA @KF BEA IOIJA JD=J EI JDA JMALA DEAH=H?DO B = @KFI ALAH J=A  = ?=?DA94 6DA HA=@O HJ B JDA ?=?DA94 BEA IOIJA  JDA @KF J=A .A> & ''# ?= >A HABAHA?A@ =I /1995/0218 E JDEI FIAK@ @ALE?A 6DAIA?@@KFJ=AJD=J@=OME>A /1995/02181

D  wN1.N2 6DEIEI=5+51@EI?JHAH=@J=HCAJ 

D  lN1.N2 6DEIEIJDAI=A=I w>KJA>?BHJDA5+51@EIEIHALA@BH=>AEC

D



jJDD(1KADIE1IDJD3>J2DAI*AF)=IKHDAA3KAJ@D>A@@NAA5LE+?5AK1IEJJB=A>wHBA=?HFAl=J@J6AADHLAIE?DEAI2JIDA=HAKJDAA>5+N51

@HELAI E JDA KA >N =@ D1 =@ D2 KIJ >A w D3

.H >JD w =@ r @ALE?AI =O B JDA ?BECKH=JE K>AHI ?= >A HAF=?A@ >O = EJAH=JHBJDABH <N1-N2> 6DKI

[w0.<2-6>]

EI JDA EJAHA=LA@ 5+51 @EII  5+51 J=HCAJI JDHKCD $ B 5+51 ?JHAH  6DA =E BEAIOIJA-AEAEI@ABEA@>OJDA?BECKH=JEIJHEC

#

c[w1.<0-5>.0]j(w6w5w4w3w2)l(<0-236>l<238-474>)
6DEI EI = ?=?DA94 @HELAH 6DA ?=?DA EI JDHAA EJAHA=LA@ @EII  5+51 ?JHAH  J=HCAJI !"=@# 6DA94D=BBJDA?=?DA94EI"%"KA>N@EII

The read-ahead processes
6DAHA =HA = IAJ B BEA IOIJA FH?AIIAI rah JD=J M=EJ BH AII=CAI ?IEIJEC B = @ALE?A =@ >? =@@HAII 9DA = AII=CA ?AI E JDA FH?AII HA=@I JDA IFA?EBEA@ >? BH JDA @ALE?A 6DEI EI @A >O ?=EC getbuf =@ putbuf 6DA FKHFIA B JDEI EI JDA DFA JD=J JDAIA >?I ME >A KIA@=JAH=@JD=JJDAOMEHAIE@AEJDA>KBBAH ?=?DACAKCDJJ>A@EI?=H@A@>ABHAJDAO=HAKIA@
6DA AII=CAI J JDA HA=@=DA=@ FH?AIIAI =HA CAAH=JA@ >O JDA IAHLAH FH?AIIAI 6DA IAHLAH FH?AIIAI =EJ=E = HA=JELA >? =H E ALAHO FA BEA 9DAALAH = FA BEA HA=@I JD=J HA=JELA >? JDA ANJ  >? =@@HAIIAI B JDA BEA =HA IAJ J JDA HA=@=DA=@ FH?AIIAI =@ JDA HA=JELA >? =H EI =@L=?A@ >O  6DA EEJE= HA=JELA >? EI IAJ J  1B JDA BEA EI FAA@ =@ O = BAM >OJAI =HA HA=@ JDA  =JE?EF=JEC HA=@I =HA FAHBHA@ IE?A JDA HA=JELA >? =H EI IAJ J  =@ O >? BBIAJEIHA=@ 6DEIEIJFHALAJIAB=EHO?=?JEIK?D=I
file *
BHIM=FECJDABEAIOIJAMEJDHA=@=DA=@HAGKAIJIJD=JMEALAH>AKIA@

Cache/WORM Driver
6DA ?=?DA94 ?M @HELAH EI >O B=H JDA =HCAIJ =@ IJ ?FE?=JA@ @ALE?A @HELAH E JDA BEA IAHLAH 6DAHA =HA BKH @ALE?AI ELLA@ E JDA ?M @HELAH 1J EFAAJI = HA=@MHEJA FIAK@@ALE?A JDA ?M@ALE?A =@ = HA=@O FIAK@@ALE?A JDA @KF @ALE?A >O FAHBHEC FAH=JEI  EJI JM ?IJEJKAJ @ALE?AI JDA HA=@MHEJA ?@ALE?A =@ JDA MHEJA?AHA=@=O M@ALE?A 6DA >? K>AHI  JDA BKH @ALE?AI =HA @EIJE?J =JDKCD JDA ?M =@@HAIIAI @KF =@@HAIIAI =@ JDA M =@@HAIIAI =HA DECDO ?HHA=JA@
6DA?M@HELAHKIAIJDAM@ALE?A=IJDAIJ=>AIJH=CABJDABEAIOIJA =J JDA JEA B JDA =IJ @KF ) AMO MHEJJA =@ = =HCA K>AH B HA?AJO KIA@ AN=?J ?FEAI B >?I B JDA M@ALE?A =HA AFJ  JDA ?@ALE?A 6DA ?@ALE?A EI K?D I=AH JD= JDA M@ALE?A =@ I JDA IK>IAJ B M>?I JD=J =HA AFJ  JDA ?@ALE?A =HA =FFA@ JDHKCD=D=IDJ=>AAFJ=F=HJEJEBJDA?@ALE?A
6DA =F FHJE B JDA ?@ALE?A ?IEIJI B >?I B >K?AJI B AJHEAI 6DA @A? =H=JEIBM
enum {
BKPERBLK = 10, CEPERBK = (BUFSIZE - BKPERBLK*sizeof(long)) /
(sizeof(Centry)*BKPERBLK), };

typedef struct {
ushort short long } Centry;

age; state; waddr;

$

typedef struct {
long Centry } Bucket;

agegen; entry[CEPERBK];

Bucket bucket[BKPERBLK];

6DAHA EI AN=?JO A AJHO IJHK?JKHA BH A=?D >? E JDA @=J= F=HJEJE B JDA ?@ALE?A ) >K?AJ ?J=EI = B JDA M=@@HAIIAI JD=J D=LA JDA I=A D=ID ?@A 6DAHA =HA =I =O >K?AJI =I ME BEJ E = >? =@ AKCD >?I J D=LA JDA HAGKEHA@ K>AH B AJHEAI 6DA AJHEAI E JDA >K?AJ =HA =EJ=EA@ E .1. H@AH MEJD = =CA L=HE=>A =@ = E?HAAJEC =CA CAAH=JH 9DA JDA =CA CAAH=JH EI =>KJ J LAHBM = B JDA =CAIEJDA>K?AJ=HAHAI?=A@BHAH
6DA BMEC IJAFI C EJ ?LAHJEC = M=@@HAII EJ = ?=@@HAII 6DA >K?AJ EIBK@>O

bucket_number = w-address % total_buckets getbuf(c-device, bucket_offset + bucket_number/BKPERBLK);

)BJAH JDA @AIEHA@ >K?AJ EI BK@ JDA @AIEHA@ AJHO EI BK@ >O = EA=H IA=H?D MEJDE JDA>K?AJBHJDAAJHOMEJDJDA@AIEHA@ waddr
6DAIJ=JAL=HE=>AEJDAAJHOEIABJDABMEC

enum {
Cnone Cdirty, Cdump, Cread, Cwrite, Cdump1, };

= 0,

-LAHO M=@@HAII D=I = IJ=JA *?I JD=J =HA J E JDA ?@ALE?A D=LA JDA EFEA@ IJ=JA Cnone 6DA Cread IJ=JA EI BH >?I JD=J D=LA JDA I=A @=J= =I JDA ?HHAIF@EC >? E JDA M@ALE?A 5E?A JDA ?@ALE?A EI K?D B=IJAH JD= JDA M@ALE?A Cread >?I =HA AFJ =I C =I FIIE>A =@ KIA@ E FHABAHA?A J HA=@EC JDA M@ALE?A Cread >?I =O >A @EI?=H@A@ BH JDA ?@ALE?A MDA JDA IF=?A EI AA@A@ BH AMAH @=J= 6DA Cwrite IJ=JA EI MDA JDA ?@ALE?A ?J=EI AMAH@=J=JD=JDA?HHAIF@ EC >?  JDA M@ALE?A 6DEI D=FFAI MDA = Cnone Cread H Cwrite >? EI MHEJJA 6DA Cdirty IJ=JA EI MDA JDA ?@ALE?A ?J=EI AM @=J= =@ JDA ?HHAIF@ EC >?  JDA M@ALE?A D=I ALAH >AA MHEJJA 6DEI D=FFAI MDA = AM >? D=I >AA=?=JA@BHJDABHAAIF=?AJDAM@ALE?A
6DA Cwrite =@ Cdirty >?I =HA ?HA=JA@ =@ ALAH HALA@ 7AII IA JDEC EI @A J ?LAHJ JDAIA >?I JDA ?@ALE?A ME CH=@K=O BE KF =@ IJF BK? JEEC ?A=@=OH>O?=@= dump BJDA?M@ALE?A EI J=A 6DA FKHFIA B = @KF EI J GKAKA JDA MHEJAI JD=J D=LA >AA IDKJA@ J JDA ?@ALE?A J >A MHEJJA J JDA M@ALE?A 5E?A JDA M@ALE?A EI = 94 >?I ?=J >A HAMHEJJA *?I JD=J D=LA =HA=@O >AA MHEJJA J JDA 94 KIJ >A HA?=JA@ J JDA KKIA@ FHJE B JDA M@ALE?A 6DAIA=HAFHA?EIAOJDA>?IMEJD Cwrite IJ=JA
6DA @KF =CHEJD EI =I BMI = 6DA JHAA  JDA ?M@ALE?A EI M=A@ =I C =I JDA >?I LEIEJA@ D=LA >AA @EBEA@ IE?A JDA =IJ @KF 6DAIA =HA JDA >?I MEJD IJ=JA Cwrite =@ Cdirty 1J EI FIIE>A J HAIJHE?J JDA IA=H?D J MEJDE JDAIA >?I IE?A JDA @EHA?JHO ?J=EEC = @EBEA@ BEA KIJ D=LA >AA =??AIIA@ J @EBOJDABEA =@ =??AIIEC = @EHA?JHO ME IAJ EJI @EBEA@ JEA JDKI ?=KIEC JDA >? ?J=EEC EJ

%
J >A MHEJJA 6DA @EHA?JHO ?J=EEC JD=J @EHA?JHO KIJ >A @EBEA@ BH JDA I=A HA=I 6DA JHAA M= EI JDKI @H=IJE?=O HAIJH=EA@ =@ JDA JHAA M= @AI J J=A K?D JEA > ) Cwrite >?I BK@ E JDA JHAA IA=H?D =HA HA?=JA@ J AM >= >?I  JDA M@ALE?A =@ ?LAHJA@ J Cdump IJ=JA ) Cdirty >?I =HA ? LAHJA@ J Cdump IJ=JA MEJDKJ HA?=JE )J JDEI FEJ = @EBEA@ >?I E JDA ?M @ALE?A D=LA M=@@HAIIAI JD=J FEJ J KMHEJJA 94 >?I 6DAIA >?I =HA =HA@ BH =JAH MHEJEC J JDA M@ALE?A MEJD JDA IJ=JA Cdump ? ) FA BEAI JD=J MAHA FEJEC J @EBEA@ >?I =HA HAFAA@ J FEJ =J JDA ?HHAIF@EC HA=?=JA@ >?I 6DEI ?=KIAI JDA @EHA?JHEAI A=@EC J JDA FA BEAI J >A @EBEA@ 6DKI JDA EL=HE=J @EI?KIIA@ E = EI =EJ=EA@ @ 6DA >=?CHK@ @KFEC FH?AII ME IMO CJDHKCDJDA=FBJDA?@ALE?A=@MHEJAKJ=>?IMEJD Cdump IJ=JA
6DA @KF J=AI = BAM EKJAI J M= JDA JHAA =@ =H JDA >?I 1J ?= J=A DKHI J MHEJA JDA =HA@ >?I J JDA 94 1B = =HA@ >? EI HAMHEJJA >ABHA JDA @ ?FO D=I >AA MHEJJA J JDA 94 EJ KIJ >A BH?A@ J JDA 94 >ABHA EJ EI HAMHEJJA 6DAHA EI  FH>A EB =JDAH @KF EI J=A >ABHA JDA BEHIJ A EI BEEIDA@ 6DAAMO=HA@>?I=HAKIJ=@@A@JJDA=HA@>?IABJBHJDABEHIJ@KF
1BJDAHAEI=AHHHMHEJEC==HA@>?JJDA94JDAJDA dump IJ=JA EI ? LAHJA@ J Cdump1 =@ =K= EJAHLAJE EI AA@A@ 5AA JDA cwcmd mvstate ? =@ E fs& 6DAIA >?I ?= >A @EIFIA@ B >O ?LAHJEC JDAEH IJ=JA >=? J Cdump I JD=J JDAO ME >A MHEJJA =C=E 6DAO ?= =I >A ?LAHJA@ J Cwrite IJ=JA IJD=JJDAOME>A=?=JA@AM=@@HAIIAI=JJDAANJ @KF 1 IJ JDAH HAIFA?JI = Cdump1 >?>AD=LAIEA= Cwrite >?
Sync Copy and WORM Copy Processes
6DA scp FH?AII M=AI KF ALAHO JA IA?@I =@ EIIKAI MHEJAI J >?I E JDA >KBBAH ?=?DA JD=J D=LA >AA @EBEA@ 6DEI EI @A =KJ=JE?=O  EFHJ=J ?IA ?=@IIK?D=I halt =@ dump
6DA wcp FH?AII =I M=AI KF ALAHO JA IA?@I =@ JHEAI J ?FO = dump >? BH JDA ?=?DA J JDA 94 )I C =I JDAHA =HA dump >?I J ?FO =@ JDAHA EI  ?FAJEJE BH JDA 94 @ALE?A JDA ?FO ME ?JEKA =J BK IFAA@ 9DAALAH JDAHA EI ?FAJEJE BH JDA 94 H JDAHA =HA  HA >?I J ?FO JDA JDA FH?AII ME IAAFJAIA?@I>ABHAEC=C=E
6DA 02 94 KA>N ?IEIJI B !& @EII @ELE@A@ EJ "%$ IE@AI H F=JJAHI 2=JJAH  EI JDA A IE@A B @EI  2=JJAH  EI JDA A IE@A B JDA @EI  2=JJAH !& EI JDA B IE@A B @EI   -AEA JDA =E BEA IOIJA EI ?BECKHA@  >JD IE@AI B JDA BEHIJ
!%@EIIF=JJAHI !$=@ !&"%"
9P Protocol Drivers
6DA BEA IAHLAH @AI?HE>A@ I B=H M=EJI BH '2 FHJ? AII=CAI J =FFA=H E EJI EFKJ GKAKA 1J FH?AIIAI A=?D AII=CA =@ IA@I JDA HAFO >=? J JDA HECE=JH 6DAHA=HACHKFIB FH?AIIAI JD=J FAHBH FHJ? 1  IA AJMH H @ALE?A =@ JDAHAIKJECAII=CAI=HAIAJJJDABEAIOIJAGKAKA
6DAHA =HA JM IAJI B FH?AIIAI ethi =@ etho JD=J FAHBH -JDAHAJ EFKJ =@ KJFKJ  JM @EBBAHAJ AJMHI 6DAIA FH?AIIAI IA@ -JDAHAJ AII=CAI JBH JM HA FH?AIIAI ilo =@ ilt JD=J @ JDA 1 HAE=>A @=J=CH= FHJ?  JF B 12 F=?AJI
6DA=IJFH?AIIE-AEA con HA=@I JDA ?IA =@ ?=I EJAH= IK>HKJEAI J ANA?KJAI ?=@I JOFA@ 5E?A JDAHA EI O A FH?AII O A ?=@ ?= >A ANA?KJEC =J = JEA 5AA fs& BH = @AI?HEFJE B JDA ?=@I =L=E=>A =J JDA ? IA

