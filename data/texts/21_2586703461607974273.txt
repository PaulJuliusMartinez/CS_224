Electronics for Resonant Sensors
by Kenneth Edward Wojciechowski
B.S. (Drexel University) 1991 M.S. (Georgia Institute of Technology) 1992
A dissertation submitted in partial satisfaction of the requirements for the degree of Doctor of Philosophy
in
Engineering - Electrical Engineering and Computer Sciences
in the
GRADUATE DIVISION
of the
UNIVERSITY of CALIFORNIA, Berkeley
Committee in charge: Professor Bernhard E. Boser, Chair
Professor Liwei Lin Professor Roger T. Howe
Fall 2005

UMI Number: 3210334
UMI Microform 3210334 Copyright 2006 by ProQuest Information and Learning Company.
All rights reserved. This microform edition is protected against unauthorized copying under Title 17, United States Code. ProQuest Information and Learning Company 300 North Zeeb Road P.O. Box 1346 Ann Arbor, MI 48106-1346

The dissertation of Kenneth Edward Wojciechowski is approved

Chair

Date Date Date

University of California, Berkeley Fall 2005

Electronics for Resonant Sensors
Copyright © 2005 by
Kenneth Edward Wojciechowski

Abstract

1

Electronics for Resonant Sensors

by Kenneth Edward Wojciechowski

Doctor of Philosophy in Engineering - Electrical Engineering and Computer Sciences University of California, Berkeley Professor Bernhard E. Boser, Chair

Resonant force or displacement sensing based on observing the change in resonant frequency is attractive because of its relative insensitivity to 1/f noise, high resolution and bandwidth, and "quasi-digital" output. Applications include inertial and strain sensors, biosensors based on mass-loading, and atomic force microscopy. The main contributions of this dissertation are
· Design of low-noise high fidelity MEMS resonators for sensing, · Electronic oscillator circuits for these resonators, and · Electronic demodulation of the frequency modulated output and conversion to
a digital representation. The proposed solutions are verified in a resonant MEMS strain sensor.

2 In resonant sensors, the purity of the oscillation signal determines the achievable resolution. This requires minimizing noise, which is usually attempted by maximizing the Q (quality factor) of the MEMS resonator. It is shown, however, that there exists a tradeoff between noise that is close to the carrier and noise far from the carrier. While the former decreases with Q as expected, far from carrier noise worsens when Q is increased. Especially in applications demanding relatively high bandwidth the optimal Q can be well below 100. Because of the relatively weak interaction between the mechanical and electrical domains of MEMS resonators with electrostatic interfaces, these devices exhibit large series resistance, often in the mega-Ohm range. Low Q designs exacerbate this problem. In many setups the resulting small motional current is completely swamped by capacitive feedthrough, preventing oscillation with typical oscillator circuits. The proposed time variant square wave drive oscillator (SWO) overcomes the problem by separating motional and feedthrough current in the time domain. Reliable oscillation has been demonstrated for resonators with motional resistance in excess of 100M and orders of magnitude larger feedthrough than acceptable with traditional oscillator circuits. The output from a resonant sensor is a frequency modulated sine-wave that must be converted to a digital representation. Owing to the typically small modulation index and moderate to high bandwidth requirements, simple solutions such as frequency counting and conventional PLLs cannot easily be used for this purpose. A new type of sigma-delta PLL (PLL) addresses these challenges and combines both demodulation and digitization into a single step.

3 A prototype resonant strain sensor measurement system with a SWO oscillator and a PLL was implemented with surface mount components on a PC board. With the SWO oscillator, we obtained a phase noise floor of ­120 dBc/Hz. This is the best noise performance obtained to date for resonant sensors in this resonant frequency range. This confirms the conclusions from the model that predicted an improved phase noise floor as the Q is brought closer to its optimum value. The PLL achieved a 1Hz frequency resolution (21 ps period resolution) in a 10kHz bandwidth and the overall strain sensor measurement system achieved a 33 n resolution in 10kHz.
Bernhard E. Boser, Chair

i To my family.

ii
ACKNOWLEDGEMENTS
First, I would like to thank my advisor Professor Bernhard E. Boser for his excellent guidance during my time at Berkeley. His interest, commitment, and insight as a mentor and teacher have been instrumental in the successful completion of this work.
I also wish to thank the members of my thesis committee for their advice and help with putting together this dissertation. I truly appreciate their time and effort. In addition I would like to thank my qualifying exam committee, Professors Pisano, Howe, and Lin for their guidance and advice.
I will always cherish my time at Berkeley, which was made special by my friends and colleagues. I am thankful to all members of our group for their support and advice. Turi Aytur, Baris Cagdaser, Joe Seeger, Anand Jog, Hikaru Watanabe, Tomohiro Ishikawa, Xuesong Jiang, Mike Scott, Dimitrios Katsis and Manu Seth. I would especially like to thank Baris Cagdaser, Vladimir Petkov, Boris Murmann and Joe Seeger for their advice and help with my research, and for their friendship. They are all truly inspiring people!
Among the people in other research groups, I would like to thank Axel Berny, Luns Tee, Steve Rose, Burcin Baytekin, Brian Leibowitz, Robert Azevedo, I-yang Chen, Brian D. Sosnowchik, Wayne Huang, Babak Jamshidi, and Julian Lippmann for their time and help. I want to thank all my friends and colleagues for the great memories I have from my time at Berkeley.

Acknowledgements

iii

I would also like to thank the BSAC staff and the electrical engineering department staff for their support and help over the years.
In addition, I would like to thank Timken for their guidance and support of this research. I would also like to thank the people at Robert Bosch GmbH: Wilhelm Frey, Christoph Gahn, Marcus Lutz, and Aaron Partridge (to name a few) for their advice and help.
I would like to especially thank my parents Ed and Barbara, and my sister Karen, for their support and encouragement through the years and during my time at Berkeley.
Finally, I thank my wife Uma for her advice, patience, encouragement, and unconditional love over the years. Without her none of this work would have been possible!

This work was supported by the Berkeley Sensor and Actuator Center (BSAC), and the Army Research Office (ARO) grant # DAAD 19-02-1-0198.

Table of Contents

iv

TABLE OF CONTENTS

Acknowledgements ........................................................................................................... ii Table of Contents ............................................................................................................. iv Chapter 1 : Introduction .................................................................................................. 1
1.1 Introduction and Motivation .............................................................................. 1 1.2 Chapter Organization ......................................................................................... 4 Chapter 2 : MEMS DETF Resonant Sensors................................................................. 6 2.1 MEMS DETF Resonant Sensors........................................................................ 6
2.1.1 Basic Operation................................................................................... 6 2.2 DETF Sensor Properties..................................................................................... 7
2.2.1 Sensitivity ........................................................................................... 7 2.2.2 Temperature Sensitivity .................................................................... 10 2.2.3 Temperature Compensation .............................................................. 12 2.2.4 Actuation and Sensing ...................................................................... 18 2.2.5 Electrical Model................................................................................ 19 2.2.6 Electrostatic pull-in........................................................................... 23 2.2.7 Device Nonlinearities........................................................................ 25 2.3 Discussion ........................................................................................................ 27 Chapter 3 : Resonant Sensor Measurement Systems .................................................. 28 3.1 Resonant Sensor Measurement Systems.......................................................... 28 3.2 Resonant Sensing Methods .............................................................................. 28 3.3 Resonant Frequency Measurement Using an Oscillator (Resolution) ............. 31 3.3.1 Phase Noise, Frequency Noise, and Sensor Resolution.................... 33 3.3.2 Phase Noise Model for a Trans-Impedance Oscillator (Optimum Q)
36 3.3.3 Effect of Peak Deflection on Phase Noise ........................................ 41

Table of Contents

v

3.3.4 3.3.5

Critical Deflection and Phase Noise ................................................. 42 Peak Deflection and 1/f3 Phase Noise............................................... 43

3.3.6 Summary of Effect of Bandwidth, Q, and Resonator Deflection on

Resolution ........................................................................................................ 45

3.3.7 Ultimate Resolution for a Resonant Sensor ...................................... 46

3.4 Discussion ........................................................................................................ 48

Chapter 4 : DETF REsonant Strain sensor and Square Wave DRive Oscillator..... 49

4.1 DETF Resonant Strain Sensor ......................................................................... 49

4.2 Challenges of low Q oscillator design (Feed-through Capacitance)................ 53

4.3 Square Wave Drive Oscillator ......................................................................... 56

4.3.1 Operation........................................................................................... 56

4.3.2 SWO Phase Noise ............................................................................. 61

4.4 DETF Strain Sensor Measured Results............................................................ 67

4.5 Discussion ........................................................................................................ 72

Chapter 5 : Frequency Measurement Techniquies...................................................... 74

5.1 Introduction...................................................................................................... 74

5.2 Frequency measurement requirements: Strain Measurement System ............. 75

5.3 Frequency measurement methods .................................................................... 76

5.3.1 Digital Radio: Digitization Followed by Digital FM Demodulation 76

5.3.2 Phase Locked Loop (PLL) demodulation ......................................... 78

5.3.3 Period measurement.......................................................................... 80

5.3.4 Sigma Delta Phase Locked Loop...................................................... 84

5.4 Discussion ........................................................................................................ 86

Chapter 6 : Sigma Delta PLL Period Measurement System ...................................... 88

6.1 Sigma Delta PLL Period Measurement System............................................... 88

6.1.1 Linear Model of the Sigma Delta PLL ............................................. 88

6.1.2 High-Order Loop Architecture ......................................................... 92

6.1.3 PLL A/D Size and Loop Order .................................................... 95

6.2 Prototype Sigma Delta PLL ............................................................................. 99

Table of Contents

vi

6.2.1 FPGA design................................................................................... 100 6.2.2 Continuous-Time Filter Design ...................................................... 104 6.3 Measured Results ........................................................................................... 110 6.3.1 Experimental Setup......................................................................... 110 6.4 Discussion ...................................................................................................... 113 Chapter 7 : Conclusions and Future Work ................................................................ 114 7.1 Summary ........................................................................................................ 114 7.2 Future Directions............................................................................................ 118 7.2.1 Design of Better MEMS Resonators (Phase Noise) ....................... 118 7.2.2 Temperature Compensation ............................................................ 119 7.2.3 Sigma Delta Phase Locked Loop: Other Applications ................... 119 Appendix A : Phase Noise Due to 3rd Order Resonator Nonlinearities ................... 124 Appendix B : SWO Oscillator Schematic and PC Board.......................................... 130 Bibliography .................................................................................................................. 132

1
CHAPTER 1:
INTRODUCTION
1.1 Introduction and Motivation
MEMS resonant sensors have been demonstrated in a wide range of applications such as atomic force microscopy, strain measurement and inertial navigation [1, 2, 3]. In each of these applications the resonant frequency is a function of the quantity to be measured. For instance the measurand may cause changes in the sensor stiffness or its mass resulting in a resonant frequency shift. The goal of this work is to implement a high resolution (0.1 µ in 10kHz) resonant strain sensor to measure very small strain fields in automobile suspension systems for vehicle traction control.
To perform this measurement, electronics are used to interrogate the sensor to determine its resonant frequency. The electronics that perform this function are collectively referred to as a resonant sensor measurement system. This work concentrates on resonant sensor measurement systems that are composed of two components. The first component is a resonant sensor combined with electronics to create an oscillator, referred to as a resonant sensor oscillator. This oscillator output is equal to the resonant frequency of the sensor and hence its output is frequency modulated (FM) by the measurand [4]. This modulated frequency is measured and/or demodulated by the second component of the measurement system to output a signal proportional to the measurand.

1.1 Introduction and Motivation

2

Unfortunately, the output frequency of the resonant sensor oscillator is corrupted by noise from both the resonator and the electronics. This noise determines the minimum detectable change in frequency (frequency resolution) and hence the minimum detectable strain, force or mass (sensor resolution). Therefore it is invaluable to have a good understanding of how the properties of both the resonant sensor and electronics in the oscillator affect frequency noise.
One approach to determine oscillator frequency noise is to measure or calculate its phase noise. The frequency noise can then be derived from this phase noise. This method has been used in the past [1, 5] to estimate the resolution of resonant sensors. In [1, 5] phase noise was reported to be inversely proportional to both Q and the drive level of the resonator. Typically drive level corresponds to peak deflection, xb, of the resonator at the oscillator fundamental frequency (typically the sensor resonant frequency). If phase noise is indeed inversely proportional to both Q and xb, then resolution is limited by the physical limits of Q and xb. However, a detailed analysis shows that a more complex relationship exists between phase noise, resonator drive level and Q.
This research presents a detailed model for phase noise (and hence resolution) that reveals a more complicated relationship between phase noise, Q and xb. This model shows that, depending on the desired sensor bandwidth, there are values for both Q and xb that optimize resolution. In fact, the optimum Q will be shown to be proportional to the resonant frequency, fr, and inversely proportional to the sensor bandwidth, BW. Hence, the phase noise model provides an estimate for the optimum resolution attainable with a resonant sensor.

1.1 Introduction and Motivation

3

Finally, an example design of a MEMS resonant strain sensor is presented based on a detailed model. This example demonstrates that the sensor performance improves by setting Q close to its optimum value improves sensor performance. Previous work had suggested that sensor performance could be arbitrarily improved by increasing sensor Q [1, 5].
For resonant sensors with frequencies in the 100's of kilohertz with sensor bandwidths ranging from 100Hz to 1kHz, the optimum Q can be quite low (ranging from 100 to 1000). Operation at low Q can introduce complications in the oscillator design. Designing a low Q oscillator requires overcoming deleterious effects of parasitic feedthrough capacitance. To solve this problem, a time-variant square wave drive oscillator (SWO) was developed that enabled oscillation of low Q sensors in the presence of large feed through capacitance.
The other challenge in this resonant sensor measurement system is to develop a highresolution method to measure and digitize the output frequency of these oscillators. Typically a phase locked-loop (PLL) is used to demodulate the oscillator output [5]. Implementing this system with PLLs would require a two-step scheme that involves demodulation, performed by PLL, followed by a digitization step done by an A/D converter. Additionally, voltage controlled oscillators (VCOs) used in the PLL feedback loop adversely affect the performance of the measurement system.
We developed a sigma delta PLL (PLL) to implement the frequency measurement system. This combines the demodulation and the digitization into a single step to simplify the design of the measurement system. In addition it takes advantage of oversampling

1.2 Chapter Organization

4

allowing simplification of the A/D converter design. The PLL uses a digital counter instead of the VCO. The counter accuracy is dependent on the frequency reference used to drive it. With a high accuracy reference, such as an external crystal oscillator, the variation in the system due the counter is much lower than the variation introduced by a VCO.
This new resonant sensor measurement system with a SWO oscillator and a PLL was implemented with surface mount components on a PC board to demonstrate the feasibility of these concepts. With this SWO oscillator, we obtained a phase noise floor of ­120 dBc/Hz. This is the best noise performance obtained to date for resonant sensors in this resonant frequency range. This confirmed the conclusions from the model that predicted an improved phase noise floor as the Q is reduced. The PLL implementation achieved a 1Hz frequency resolution (21 ps period resolution) in a 10kHz bandwidth. This overall measurement system was used to implement a prototype strain sensor and achieved a 33 n resolution in 10kHz.

1.2 Chapter Organization
This thesis is organized as follows: Chapter 2: Details the design of double-ended tuning fork resonant sensors. It provides the basis for the development of the sensors electrical equivalent model. In addition it discusses some of the non-ideal resonator characteristics such as nonlinearity and, temperature variation.

1.2 Chapter Organization

5

Chapter 3: Discusses the there different methods for detection of the sensors resonant frequency. In addition an analytical model is developed for the resolution of an oscillator detection system. The ultimate resolution of this type of system is derived and it is shown that there is an optimum Q for a given sensor design.
Chapter 4: Details the design and the measured results of a resonant strain gauge oscillator. This includes the development of a new time variant oscillator used to overcome issues of low Q sensor design.
Chapter 5: Reviews methods of frequency measurement. It discusses the trade-offs when using the different methods and proposes the use of a Sigma Delta phase locked loop (PLL) to measure the output of the resonant strain gauge oscillator.
Chapter 6: Describes the design and measured results of a Sigma Delta PLL frequency measurement system used to measure the output of the resonant strain gauge oscillator developed in chapter 4.

6
CHAPTER 2: MEMS DETF RESONANT SENSORS
2.1 MEMS DETF Resonant Sensors
2.1.1 Basic Operation Resonant sensors have been used in numerous applications. For example they have
been used to measure gas concentrations (mass) [6], acceleration [7], rotation [3], pressure [8] and strain [9]. In each of these applications the resonant frequency, fr, is a function of the quantity to be measured. These quantities usually affect the resonant frequency by changing the stiffness (spring constant, Km) or mass, Meff of the resonator. For instance a resonant accelerometer sensor (Fig. 2-1) operates by attaching a mass to one end of the double-ended tuning fork (DETF).
Fig. 2-1: DETF accelerometer.

2.2 DETF Sensor Properties

7

Acceleration applied to the mass in the axial direction creates a force, which results in an extension, or compression of the DETF beams. Hence changing the beams spring constant and thus their resonant frequency.

2.2 DETF Sensor Properties
This section will outline some basic properties of DETF sensors, which will be used to provide valuable insight into the design of these sensors in this and later chapters.

2.2.1 Sensitivity As shown in Fig. 2-1 a force is applied to the DETF axially. If the force is a time
varying signal, then the resonant frequency of the DETF is frequency modulated by the applied signal. The change in the resonant frequency due to a change in input is called the sensitivity. To find the sensitivity, the resonant frequency must be derived as a function of force applied to the beam.

Fig. 2-2: DEFT sensor with actuators.

2.2 DETF Sensor Properties

8

Consider the DETF shown in Fig. 2-2. The Rayleigh method can be used to estimate the resonant frequency of the DETF beams. This method is based on equating the maximum kinetic energy to the maximum potential energy and solving for the resonant frequency [10].

  r2 =

K eff Meff

=

E

I

L 0



 2( x ) x 2

2

dx

+

F1/

2

L 0

 

(x) x

2 

dx

+

A

E

BI

L 0

 

(x) x

2 

dx

L

 A (x)2 dx + Mact

0

(2-1)

Where F1/2 is the axial force applied to one DETF beam, E is the Youngs modulus and I is the beams moment of inertia. The density of the beam is , its length is L, and its cross sectional area is A = w×t. Also, it is assumed that the beam will have some built-in strain, BI. Mact is the actuator mass. It is modeled as a lumped mass at the center of the beam. Finally, (x) is a trial function, which estimates the mode shape of interest. If (x) is the exact solution for the mode shape then this method gives the exact resonant frequency. Otherwise the Rayleigh method estimates an upper bound for the resonant frequency. For operation in the 1st mode the trial function (2-2) proposed by [11] was used in this work.

(x)

=

16 L4

x

2

(x

-

L)2

Solving equation (2-1) for the resonant frequency we get:

(2-2)

r2

=

256 E w3 t

15

L3

 

128 315



t

w

L

+

M

act

 

1 +

1 7

L2 E w3

t

F+

2 7

L2 w2

BI 

=

k eff M eff

(1 +  F +  BI )

(2-3)

2.2 DETF Sensor Properties

9

In equation (2-3) only a fraction of the beam mass,  t w L contributes to the total

effective

mass,

M eff

=

128 315



t

w

L

+

M act

.

Also

the

effective

spring

constant

k eff

=

256 E w3t 15 L3

agrees

well

with

the

spring

constant

of

a

clamped-clamped

beam,

16 E w3t L3

(assuming

force is applied at the center of the beam). Finally 0 =

k eff M eff

is the nominal resonant

frequency. Using equation (2-3), the force sensitivity can be calculated assuming a built

in strain, BI in the DETF beams (for F = 0):

 r F

=

1 2

 o 1 +  BI

=

1 14

256 L

1

1

15

Et

w3

 

128 315



t

w

L

+

M act

 

1 +

2 7

L2 w2

 BI



(2-4)

The sensitivity to strain,  can be calculated by noting that F = 2AE and replacing force with strain in equation (2-3).

 r 

=

1 2

 0 1 +  BI

=

1 7

256 E L

t

1

15

w

 

128 315

t

w

L

+

M act

 

1 +

2 7

L2 w2

BI



(2-5)

It is interesting to note that the sensitivity of the DETF for both force and strain is inversely proportional to the actuator mass. In other words the highest sensitivity can be obtained by reducing the actuation mass to zero. In addition, increasing the length and or decreasing the width of the DETF beam improves sensitivity. This implies that lower frequency DETFs have better sensitivity.

2.2 DETF Sensor Properties

10

2.2.2 Temperature Sensitivity Temperature sensitivity is an important consideration in the design of resonant
sensors. For DETFs there are two main causes for temperature variation. The first is due to variation in the stiffness (Youngs modulus) with temperature. The second is due to mismatch in the coefficient of thermal expansion (CTE) between the sensor packaging and the DETF sensor.
The following relationship between Youngs modulus and temperature was published by [12] in 1982.

E(T)

=

- 3.65 × 10- 6 

GPa oK

 T2 

-

8.674 ×10-3 

GPa oK

 

T

+165.94 GPa

For: 293 oK  T  923 oK

(2-6)

A plot of (2-6) is shown in Fig. 2-3.

Fig. 2-3: Plot of Equation (2-6). Youngs modulus of polysilicon versus temperature.

2.2 DETF Sensor Properties

11

Consider the range of temperature from 293 oK to 393 oK. In this range the modulus is a fairly linear function of temperature as shown in Fig. 2-3 and can be modeled by:

E(T) =  T + E0o K

= -1.12 ×10-2

GPa oK

T +166.36 GPa

,

For

293 oK  T  393 oK

(2-7)

The DETF temperature sensitivity is found by substituting (2-7) into (2-3) and taking the derivative with respect to temperature. Also it is assumed there is no built in strain.

 r (T)
T

=

 T

   

256 E(T)

15

L3 

128 315



t

w

w3 t L + Mact

 

   

=

1 2

1
E(T)



E(T)
T

r

(T)

,

or

1
r (T)



r (T)
T

=

1 2

1
E(T)



E(T)
T

=

1 2

 



T

 + E0o

K

 

(2-8)

This relationship indicates that the percentage change in resonant frequency due to temperature is half that of the Youngs modulus due to temperature. For example at 293 oK the change in resonant frequency due to temperature would be ­34.3 ppm/oK versus a relative change in Youngs modulus of -68.6 ppm/ oK.
Mismatch in the CTE's of the DETF and the packaging can also contribute to temperature variation. Consider the case where the DETF is to be used to sense strain in steel machinery. In this case the DETF is anchored to a silicon substrate and the substrate is bonded to steel. A strain is generated in the silicon substrate due to the difference in CTEs. Steel has a CTE of approximately 12 ppm/oK while silicon's CTE is approximately 3 ppm/oK. Therefore the strain seen by the silicon substrate (2-9) will be tensile since steel expands four times more over temperature than the silicon.

2.2 DETF Sensor Properties

12

(T) = (CTESteel - CTESi ) T = CTE  T

(2-9)

Adding this temperature variation into (2-3) and taking the square root gives an equation for resonant frequency that captures both temperature effects:

r =

256 (  T + E0o K )

15

L3

 

128 315



t

w

L

+

w3 t M act

 

1 +

2 7

L2 w2

( + CTE  T))

The normalized temperature sensitivity is given by:

(2-10)

r

1 (T, )

r (T, ) T

=

2 1 +

2 7

w2 L2

CTE

2 7

w2 L2

(

+

CTE

 T)

+

2 (

T

 +

E0oK )

(2-11)

Equation (2-11) captures the total temperature variation of the resonant frequency. For example, a DETF strain sensor with a Length of 200 µm and a width of 6 µm attached to a steel substrate at 293 oK, and assuming  = 0, would have a temperature sensitivity of:

1 r (T, )

r (T, ) T

=1.16 ×10-3

ppm oK

- 34.34

ppm oK

=

-34.339

ppm oK

(2-12)

Thus the temperature variation due to the Youngs modulus dominates. However the variation due to the TCE mismatch cannot be ignored depending on the resolution requirements of the sensor.

2.2.3 Temperature Compensation Since temperature variation can greatly affect the sensitivity and operation of a device
there is a lot of interest in minimizing/removing it through various temperature

2.2 DETF Sensor Properties

13

compensation techniques. Variation due to CTE mismatch can be removed by clever package design. For instance, the sensor chip can be attached to the package with a compliant adhesive that absorbs all the strain due to package expansion. Another way to remove strain due to CTE mismatch would be to design the sensor such that transfer of strain from the chip substrate into the DETF is minimized. For instance, the tuning fork can be somewhat isolated from the strain by anchoring it at only one point. The other side of the tuning fork then can be connected through a compliant spring, kc to the substrate. The spring constant kc must be designed such that it is much less than the axial stiffness, kaxial of the DETF. If this is done most of the strain will be absorbed by the spring kc. For this type of compensation the strain transferred from the substrate to the DETF is:

 DETF

=

kc

kc + k axial

Substrate

(2-13)

The only constraint on kc is to make sure the suspension meets the maximum shock (acceleration) requirements for the sensor.
Unfortunately it is not as easy to remove the temperature variation due to Youngs modulus for DETF resonant sensors. Consider the resonant accelerometer in Fig. 2-1. Assuming the temperature variation due to CTE mismatch has been removed by packaging:

 r a

=

M accel

 r F

=

M accel 14

256 L

1

1

15

E t w3

 

128 315



t

w

L

+

M act

 

1 +

2 7

L2 w2

BI 

(2-14)

2.2 DETF Sensor Properties

14

Note, that the sensitivity is inversely proportional to the Youngs modulus. Hence it will vary with temperature. Also note that even using a differential design as proposed in [13] will not remove this variation. To compensate, the temperature of the device must be measured and sensor calibration must be used.
Unlike inertial sensors such as the resonant accelerometer outlined above, resonant strain sensors require the sensor packaging to transfer all the strain from the material it is attached to the DETF. As a result CTE mismatch cannot be reduced using isolation techniques. In addition, the strain sensitivity for DETF sensors (2-5) is proportional to the Youngs modulus and hence temperature. Therefore the strain sensor will be affect by CTE mismatch and variation in Youngs modulus due to temperature.
An example of a temperature compensation scheme for a resonant strain sensor is shown in Fig. 2-4. It is based on using two DETFs. One is temperature and strain sensitive. The second is denoted as the reference DETF is sensitive only to temperature. The reference DETF is decoupled from the substrate with a spring, kc. Typically the two DETFs have different geometries i.e. beam width and length to prevent mode locking. In addition the orientation of the DETFs should be the same to avoid differences in Youngs modulus due to orientation. Two assumptions are made in this scheme. First kc << kaxial and hence no strain is applied to the reference DETF. This assumption is valid since kaxial can be in the range of 104 N/m to 105 N/m. At the same time, kc can be in the

2.2 DETF Sensor Properties

15

Fig. 2-4: Two-sensor temperature compensation.
range of 10-1 N/m to 10 N/m. If designed correctly the strain that reaches the DETF (2-13) can be up to a million times smaller than the strain applied to the sensor substrate. The second assumption is that the temperature of the reference DETF is the same as the strain sensitive DETF. This is a fairly good assumption as silicon has a high thermal conductivity. Also the reference DETF can be placed very close to the strain sensitive DETF. Applying these assumptions the resonant frequency for the reference DETF is:

ref =

256 (  T + E0o K ) w3 t

15

L3

 

128 315



t

w

L

+

M act

 

=

Ieff1 (  T + E0o K ) M eff1

(2-15)

The resonant frequency for the strain and temperature sensitive DETF is given by:

2.2 DETF Sensor Properties

16

( ( ))strain =

Ieff2 (  T + E0o K ) M eff 2

1 + 2  + BI + CTE  T

(2-16)

Solving these equations for both temperature and strain, the solution for temperature can be shown to be:

T

=

M eff1

2ref 

- E0oK Ieff1

Ieff1

= a1 + b1 r2ef

And the solution for strain is:

(2-17)



=

 BI

+

E0o K

Ieff1

CTE - Meff1  Ieff1

TCE

r2ef

-

1 2

1 - 

Ieff1 Meff1 Ieff1 Meff1



strain ref



2

  

,

or



=

a2

+ b2 2ref

+

c

2



strain ref

2

(2-18)

Either a calibration scheme can be used to determine the coefficients of these equations, or the coefficients can be estimated using measured DETF parameters (length, width, etc).
Another way to perform temperature compensation for a strain sensor is to use two different size (width, length) DETFs that are sensitive to both temperature and strain. This is similar to the method that used a reference DETF. Now both ends of the reference are anchored to the substrate. The assumption is now that both DETFs are at the same temperature and undergo the same strain. Once again this assumption relies on how closely the DETFs can be placed together. For instance it requires the strain field to be constant over that distance. In this case, both the DETFs resonant frequencies can be

2.2 DETF Sensor Properties

17

described with equation (2-16). The resulting equations (2-19) can be solved for temperature and strain:

1 =

Ieff1

(  T + E0oK ) M eff1

(1+ 1( + BI

+ TCE  T))

,

and

2 =

I eff 2

(  T + E0oK ) M eff 2

(1+ 2 ( + BI

+

TCE  T))

(2-19)

The solution is omitted due to its large size. Finally, the calibration scheme for this method is more complicated since there are more unknowns.
The resonant gyroscope is the only type of resonant sensor where the sensitivity is not a function of the Youngs modulus and hence temperature compensation may not be required [14].
There are other examples of temperature compensation in the literature. In [15] a mechanically compensated scheme is proposed. This is a good solution for resonators used as frequency references, however it is not immediately applicable to resonant sensors. This is due to the fact that the sensors mechanical structure must be integrated with the temperature compensation. In addition it is possible to use the spring tuning effect due to electrostatic actuation [16] to cancel out temperature variation in the sensors output. In this case the resonators output frequency is a function of the bias voltage applied, VB.

2.2 DETF Sensor Properties

18

r =

k eff - ke1 M eff



k eff

-

1 2



2C(x =  x2

0)

VB2

M eff

(2-20)

Where C(x) is the actuation capacitance. A feedback loop can then be used to stabilize the resonator frequency by measuring temperature and adjusting VB to cancel out the resonators temperature variation. Another method would be to use a heater to adjust the resonator frequency [17]. In this case temperature, is measured and the power supplied to the heater is adjusted by a feed back loop to keep the resonant frequency constant over temperature.

2.2.4 Actuation and Sensing
Actuation and sensing is an integral part of resonant sensors because it provides a means for detecting changes in resonant frequency by monitoring changes in the DETF beam position (magnitude and phase) relative to a driving force. In addition the design of the actuation and sensing is used to select the desired resonance. Like most MEMS devices DETF, resonant sensors have multiple resonances (modes) with only one desired mode. For instance, to drive a DETF at its fundamental resonance (1st mode) the actuators should apply maximum force at the center of the beams. Similarly, to sense the 1st mode, the beam position sensing should be designed to maximize its sensitivity to deflection at the center of the DETF (Fig. 2-2). Generally, actuation and sensing should be designed to maximize excitation/detection of the desired mode while minimizing excitation/detection of all other modes [18]. The sensors in this work were designed to use the first mode of the DETF.

2.2 DETF Sensor Properties

19

Capacitive actuation and sensing, was used in this work, as it is readily available in micromachining processes. The two common types of capacitive actuators/sensors available are based on parallel plate and the lateral comb drive [19] actuators. The determination of which type to use is based on many factors including MEMS process constraints, required force/voltage for actuation, linearity, and maximum deflection. For resonators linearity in the actuation and sense electrodes is an important factor. Nonlinearities in the actuation/sensing can cause instability in the DETF resonant frequency [16, 20] and distortion in its output [16, 21]. As a result comb drive actuators are preferred for their excellent linearity. However one of the disadvantages of using comb drive actuators is that they have a smaller dC/dx for a given actuator area/mass, and actuation voltage compared to parallel plate actuators. Hence they generate less electrostatic force. This becomes a problem when the stiffness or effective spring constant of the resonator increases. As the stiffness increases, the voltage required to actuate the resonator increases (assuming damping remains constant). Therefore high frequency resonators tend to use parallel plate actuation, to avoid the large voltages necessary to actuate them with comb drive actuators.

2.2.5 Electrical Model A DETF resonator can be modeled as a linear mass-spring-damper system with
capacitive actuation and sensing Fig. 2-5.

2.2 DETF Sensor Properties

20

Fig. 2-5: DETF (top left), Linear mass-spring-damper model with capacitive actuation and sensing (top right), Electrical equivalent model for a DETF resonator (bottom).

Assuming linearity, a two-port model can be developed, and simple equations can be written to describe the structure. Consider the case where the sense voltage, vs = 0. In this case, the position of the structure, x, and the output current, is, can be calculated. Beam position can be derived from the force balance equation:

1 2

 

(2 Cd
x

) (VB


-

vd )2

=

2 (keff

x

+

b x&

+

M eff

&x&) ,

and

x(s)

=

Cd x meff s2

VB vd (s) + b s + keff

(2-21)

2.2 DETF Sensor Properties

21

The output current can be derived from the relationship between charge, Q and current. Note that it is important to keep track of the mathematical sign for the currents [22].

is

=

-

 Qs (t) t

=

-

 (2 Cs (t)VB )
t

=

-2

 Cs x

VB



x(t) t

,

and

is (s)

=

-

 

2

Cs x

meff

Cd x s2 +

VB2

 

bs +

s vd k eff

(s)

(2-22)

This can be repeated by setting the drive voltage, vd = 0, to calculate the current id. By linear superposition the two responses can be added together to obtain a two-port model for the resonator (Fig. 2-6).
The two-port small signal electrical model for the linear system shown in Fig. 2-6 assumes the drive and sense capacitances are matched (Cd = Cs) [22]. The values for the components in the electrical model are:

Rx

=

b 2

(2-23)

Lx

=

M eff 2

(2-24)

Cx

=

2 k eff

(2-25)

Co = Cd (x = 0) = Cs (x = 0)

(2-26)

2.2 DETF Sensor Properties

22

2

=

2

Cd x

Cs x

VB2

=

2

C x

VB 2

(2-27)

Where Keff is the DETF spring constant and Meff is the effective mass, and b is the damping coefficient of the DETF beam and actuator.
Unfortunately this model is an ideal one and does not account for interconnect and packaging related parasitics. To understand what effect parasitics have on the resonant sensor it is useful to examine the ideal electrical model with added parasitic capacitance and resistance.

Fig. 2-6: Two-port electrical equivalent DETF model.
Three parasitic components, Rs, Cps, Cpd , and Cft have been added to the ideal model in Fig. 2-6. The resistance added in series with the resonator, Rs will reduce the Q of the resonator. The parasitic capacitors Cps and Cpd adversely affect the noise performance of the resonant sensor [23]. Finally the feed-through capacitance, Cft, if large enough can make measurement of the resonator output impossible [2]. In subsequent chapters the effects of these components will be discussed in greater detail.

2.2 DETF Sensor Properties

23

2.2.6 Electrostatic pull-in Electrostatic pull-in is an important aspect in MEMS resonant sensor design as it
limits the maximum bias voltage, VB. Therefore, it places a lower limit on the resonator motional resistance (2-23). Calculation of the voltage at which pull-in occurs, VB = VPI, can often be complicated and require computer simulation. However a simple analytical equation can be derived to estimate VPI for the DETF resonators used in this work. Consider Fig. 2-7 in which part of the DETF with comb drive actuation is shown.

Fig. 2-7: Pull-in condition for a DETF driven with a comb drive actuator.
In this case the pull-in condition is shown in Fig. 2-7. This assumes the actuator is most compliant (kx < ky) in the x direction and any movement of the actuator in the x direction results in the largest nonlinear change in the electrostatic force, Fx. In contrast, a

2.2 DETF Sensor Properties

24

change in actuator position in the y direction causes a change in the force Fy (due to C5 and C6). If Lgap is made large enough, Fy << Fx, and pull-in in this direction can be ignored. Writing the force balance equation for the x direction:

1 2

Nf

 

 x

(C2

+

C4

-

C1

+

C3

)


VB

2

=k x

x

=

k L2ab

x

(2-28)

Where Nf is the number comb fingers. The capacitances and k are:

C2

= C4

=

o t LOVL go - x

,

and

C1

= C3

=

o t LOVL go + x

(2-29)

k

=

4E w3 3L

t

,

[24]

Solving (2-28) for the pull-in value for x and VB:

x = xPI = 

2 3

-1  go



0.393

go

(2-30) (2-31)

VB = VPIX  0.49

g

3 o

k

L2ab 2 Nf o t LOVL

 0.57

g

3 o

E w3 t

2 Nf o t LOVL L L2ab

(2-32)

Most of the design variables in equation (2-32) are determined by the desired DETF frequency, and actuator size/desired motional impedance. As a result, minimizing Lab is an attractive way to maximize VPIX. However, this can be difficult since it depends on other design parameters such as distance from the beam to the inside of the stationary comb, Lbc and the comb finger length, Lf. Depending on the type of process, Lbc can be a function of the minimum spacing and substrate contact size. In addition, the desired comb drive linearity sets constraints on the comb finger length (Lf), the overlap (LOVL) and the

2.2 DETF Sensor Properties

25

spacing from the tip of the comb finger to the stationary comb (Lgap). In Fig. 2-7 Lab = Lgap + Lf + Lbc. Therefore minimization of Lab is a trade off between maximizing VPIX and the desired actuator linearity.

2.2.7 Device Nonlinearities

There are two main physical effects caused by device nonlinearity. The first is distortion in the resonator output current due to nonlinear actuator capacitance. A complete analysis of this is given in [16, 21]. The second is the mechanical and actuation nonlinearities that result in a driving force, fd, and a spring constant that is a function of displacement. These nonlinearities can affect the long-term stability of the resonant sensor output frequency. In addition they can limit the power that can be applied to the resonator.
Consider the force balance equation (2-33).

1 2

 

C(x) x

 

(VB

- vd )2

=

k eff

(x)

x

+

b x&

+

Meff

&x&

(2-33)

The derivative of C(x) can be replaced with a series expansion around x =0 and, keff with a nonlinear spring. Note that this force balance equation accounts for only one

electrode (the drive electrode). An additional term would have to be added on the right

side of (2-33) to include a sense electrode and any nonlinearity it introduces.

1 2



C(0) x

+

 2C(0) x 2

x

+

1 2

3C(0) x 3

x2

+

1 6

 4C(0) x 4

x3 K (VB

-

vd

)2

=

k m1

x

+

k m3

x3

+

b

x&

+

M eff

&x&

(2-34)

The terms that are even powers of x, on the left hand side of equation (2-34), generate

static (DC) force, and force in phase with the drive voltage, vd at the fundamental

2.2 DETF Sensor Properties

26

frequency, r. The odd powers generate force that is in phase with position, x and are therefore responsible for the electrostatic spring tuning effect. A describing function

analysis can be performed in order to linearize equation (2-34). This is done by

substituting x and vd with: x = |xo|sin(r t) and vd = |vo|cos(r t). Then all terms except for the terms at the fundamental are discarded resulting in a linear differential equation (2-

35).

F

=

C(0) x

VB

vd

=

(k m1

-

k e1 )x

+

3 4

 

k

m

3

-

4 3

k

e3

 

xo

2

x

+

b x&

+

M eff

&x&

(2-35)

From (2-35) a linearized spring constant, kTOT, can be defined that is a function of the

peak deflection of the resonator, xo.

k TOT

=

(k m1

- k e1 )+

3 4

 

k

m3

-

4 3

k

e3

 

xo

2

(2-36)

The resonant frequency can now be written as:

r =

k TOT M eff

=

k m1 M eff

1 -

k e1 k m1

+

3 4



k m3 k m1

-

4 3

k e3 k m1



xo

2 

(2-37)

The electrostatic spring constants Ke1 and Ke3 are:

k e1

=



VB2 2

+

v

2 o

8



 2C(0) x2

(2-38)

k e3

=



VB2 16

+

v

2 o

96



 4C(0) x4

(2-39)

The nonlinear mechanical spring constant for a DETF resonator can be calculated by

using the method outlined in [25]. Assuming the mode shape described by (2-2) the

mechanical spring constant is written as follows:

2.3 Discussion

27

k eff (x) = k m1 + k m3x 2

=

256 15

E w3 t L3

+

131072 11025

Ewt L3

x2

(2-40)

These nonlinearities give rise to several interesting effects that have a direct impact on

resonator performance. For instance, (2-37) quantifies how electrostatic spring tuning due

to nonlinear actuators, and mechanical nonlinearity affect the resonant frequency. In

chapter 3 this result will be used to develop models which predict how flicker noise can

affect the long-term stability of DETF resonators. It will be shown how the dependence

of r on VB and vo, and hence resonator defection has an adverse affect on resonator

phase noise and hence sensor resolution.

2.3 Discussion
This chapter has presented the basic concepts needed to design DETF resonant sensors. This material will be used extensively in later chapters. We will see that parasitic capacitance plays a large role in determining the overall resolution for a resonant sensor. In addition, it will be shown that feed-through capacitance may also affect resolution by limiting the minimum Q one can use for a resonant sensor. Therefore when designing resonant sensors these capacitances should be minimized. Finally, we will see (in chapter 3) that resonant sensor nonlinearity can create noise that can adversely affect the longterm stability of resonant sensor oscillators.

28
CHAPTER 3: RESONANT SENSOR MEASUREMENT SYSTEMS
3.1 Resonant Sensor Measurement Systems
This chapter discusses the different types of resonant sensing methods used to measure the resonant frequency of the sensor. Also, an analytical model will be developed to calculate sensor resolution for this measurement system.
3.2 Resonant Sensing Methods
There are three methods for detecting a change in the sensor resonant frequency, fr. The first is a slope detection method [1]. Slope detection is based on detecting changes in the magnitude of the sensors output, given a fixed input frequency, fd. A block diagram of a slope detection system is shown in Fig. 3-1a. Fig. 3-1b shows the change in output voltage, Vout, due to a shift in resonant frequency. This detection system has a limited measurement bandwidth of ~ fr/2Q, which is due to the fact that the transient response of the resonant sensor does not change instantaneously. In fact, when the sensor resonant frequency changes, the amplitude exponentially settles to its new steady state value with a time constant  = 2Q /r [1, 26].

3.2 Resonant Sensing Methods

29

Fig. 3-1: Slope detection method. In many cases this is a severe limitation. For example, consider a resonator that has a resonant frequency of 1MHz and a Q of 10000. The maximum bandwidth would be ~ 314 Hz for this case. Theoretically, if the resonant sensor frequency could be measured directly the maximum bandwidth of the sensor would be close to its resonant frequency (1MHz). Then next method used to detect resonant frequency changes is phase detection (Fig. 3-2a). In this case, a fixed frequency, fd = fr, is used as an input. The resulting phase at the output of the resonator is compared to the input signals phase. The advantage of this method is that the phase of the sensor changes at the same rate as its resonant frequency. However, the frequency range over which phase changes linearly with frequency is approximately fr /2Q (Fig. 3-2b). Therefore, the available bandwidth ~ fr /2Q. As a result, this method cannot take advantage of the rapidly changing phase.

3.2 Resonant Sensing Methods

30

Fig. 3-2: Phase detection method. The last method uses an oscillator (feedback loop) to force the sensor to resonate at its resonant frequency (Fig. 3-3a). The oscillator output frequency, fosc, tracks the resonant frequency of the sensor by forcing the phase shift through the loop to be zero or LOOP = DETF + osc = 0 (Fig. 3-3b). Ideally, osc is zero and hence the feedback loop tracks changes in the resonator phase. As a result, this methods bandwidth is only limited by the bandwidth of the oscillator electronics. Because of the improvement in sensor bandwidth, this is the method used in resonant sensor measurement system developed in this research.

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

31

Fig. 3-3: Oscillator detection method.
3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)
Next, we explore the limits of resolution for an oscillator based frequency measurement system shown in Fig. 3-4. Resolution is one of the most important design criteria for evaluating resonant sensing. Therefore it is important to be able to estimate it analytically. For a resonant sensor that is placed in an oscillator, the output frequency of the oscillator is corrupted by noise from the resonator and electronics in the feedback loop. This noise determines the minimum detectable change in frequency (frequency resolution) and hence the minimum detectable strain, force or mass (sensor resolution). Therefore it is invaluable to have a good understanding of how the properties of both the resonant sensor and electronics in the oscillator feedback loop affect frequency noise.

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

32

Fig. 3-4: Oscillator based measurement system. One approach used to determine an oscillators frequency noise is to measure or calculate its phase noise. The frequency noise can then be obtained from phase noise. This method has been used in the past by [1, 5] to estimate the resolution of resonant sensors. In [1, 5] phase noise is reported to be inversely proportional to both Q and drive level of the resonator, xb. In [1], the minimum detectable frequency in hertz for an oscillator measurement system was reported to be:

f

=

1 2

2  fr km1Q xb2

kT BW

(3-1)

Where BW is desired bandwidth of the sensor, and xb corresponds to the peak deflection, or drive level, of the resonator at the oscillators fundamental frequency of oscillation (or the sensor resonant frequency, fr). In addition, km1 is the resonators

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

33

effective stiffness, k is Boltzmann's constant and T is temperature in degrees Kelvin. The frequency resolution in (3-1) is derived from a model for phase noise, which only accounts for 1/f2 phase noise. Therefore it is only accurate over a limited sensor bandwidth where other components of phase noise are insignificant compared to 1/f2. Assuming no 1/f3 noise exists the bandwidth over which (3-1) is valid is approximately fr/2Q. In general, one must account for all components of phase noise to obtain a good estimate for resolution. Therefore, white phase noise, which determines the phase noise floor, and 1/f3 phase noise must be included. When these components of noise are added to the model it can be shown that frequency resolution does not improve by arbitrarily increasing Q, and xb, as indicated in (3-1), but in fact, there are values of Q and xb at which resolution can be optimized.
This section develops a model for phase noise, which includes white phase noise, and 1/f3 phase noise. In doing so, it reveals that there are values of Q and drive level that optimize sensor resolution, and these values are a function of the desired sensor bandwidth.

3.3.1 Phase Noise, Frequency Noise, and Sensor Resolution For clarity, it is useful to explain the relationship between phase noise, frequency
noise and sensor resolution. Phase noise is a measure of the noise in the side bands around an oscillators center frequency. Fig. 3-5a shows the power spectral density (PSD), Sx(f), of an oscillators output normalized by the power, (Po = Sx(fr)), contained in a 1 Hz bandwidth at the fundamental frequency of oscillation, fr. It has been shown that this

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

34

normalized spectrum is proportional to phase noise [27, 28]. If the oscillator spectrum is symmetric, the corresponding phase noise, S, is the sum of the noise power from the two side bands, Psb, (Fig. 3-5b). However, only half the noise power in the side bands contribute to phase noise [27, 28, 29] while the other half results in amplitude noise.

Fig. 3-5: Relationship between spectral density, phase noise and frequency noise. The resulting phase noise as a function of offset frequency from the center frequency (fm = f ­ fr) is:

S (fm) =

Psb Po

= 2 L(fm)

(3-2)

Note that L(fm) is the single side band phase noise and is often used in specifications for communication systems. Since phase is the integral of frequency, the PSD for frequency, Sf can be determined from S.

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

35

Sf (fm ) = fm2 S (fm )

(3-3)

To determine the frequency resolution, (3-3) is integrated over the sensor bandwidth, BW (Fig. 3-5c). Finally the sensor resolution can be found by dividing the frequency resolution in a given bandwidth by the sensitivity of the sensor.

Resolution

=

1 fr

q

 fm2 S (fm ) dfm
BW

(3-4)

where the sensitivity of the sensor, fr/q is the change in resonant frequency (fr) with respect to the quantity to be measured (q). Therefore, if the phase noise for an oscillator is known, the corresponding sensor resolution can be determined.

Fig. 3-6: Trans-impedance oscillator with noise sources.

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

36

3.3.2 Phase Noise Model for a Trans-Impedance Oscillator (Optimum Q) To design a resonant sensor oscillator it is important to understand how its resolution
is affected by noise sources from both the sensor and the feedback electronics. It is useful to consider the phase noise of a trans-impedance oscillator (Fig. 3-6), as it is one of the simplest to analyze. Most of the insight gained from such an analysis applies to more complicated oscillators.
Fig. 3-6 consists of a MEMS resonant sensor whose output current is converted to voltage by a trans-impedance amplifier (TIA), with a gain of ­Rf. A variable gain amplifier (VGA) and automatic level control circuitry (not shown) provide any remaining gain required while controlling the voltage level at the oscillator output, Vout. For oscillation, the loop must have a gain equal to Rx, where Rx is the motional resistance of the resonant sensor. Therefore the VGA gain, Avga will be Rx/Rf. To calculate the phase noise for this oscillator we must calculate the ratio in (3-2). The side band power, Psb, is
proportional to all noise sources in the oscillator (Fig. 3-6) referred to its output ( v2nout ) around the center frequency fr. Therefore the phase noise of the oscillator is:

S (fm ) =

Psb Po

=

vn2out 12 Vo2sc

=

1 PMEMS R x

v

2 nout

=

Q2 Peff Reff

v

2 nout



Q2 x 2b

v2nout

(3-5)

Where Vosc is the peak output voltage of the oscillator, PMEMS is the power delivered to the resonator by the oscillator and Rx is the resonators motional resistance. In (3-5) we have replaced PMEMS and Rx with Peff and Reff, which are independent of Q allowing us to isolate the effect of Q on phase noise. Peff and Reff are defined as:

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

37

Peff

= Q PMEMS

=

r

k

m1

x

2 b

(3-6)

R eff

= QRx

=

k m1

r



2

Cs x

Cd x

Vd2c 

Note that the following parameters are defined as: km1 The linear term of the DETF beam spring constant. Cs Capacitance of one sense electrode Cd Capacitance of one drive electrode Q Quality factor of the resonator xb Peak deflection of the DETF beams r Resonant frequency of the DETF in radians/sec Vdc DC bias of the resonator

(3-7)

The most important result of this analysis is (3-5) in which we see that phase noise increases with Q and decreases with increasing peak defection, xb. Hence for a fixed xb = xmax, phase noise improves with decreasing Q assuming that v2nout in (3-5) is independent of Q.
The output noise of the oscillator in Fig. 3-6, vn2out can be derived by modeling the resonant sensor as a second order linear system.

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

38

v2nout

=

r Q

s

s2 + r2

2

v

2 nres

+ A2vga

s2

+

r Q

s

+

2r

s2 + 2r

2

v

2 n

T

(3-8)

For small deviations from the resonant frequency fr, s=j can be replaced with s = j2(frfm) in (3-8). The resulting output noise for small offsets from the center frequency is [27]:

vn2out (fm )

=



2

fo Qfm

2

v

2 nres

+

A2vga

1  

+

 

2

fo Qfm

 

2

   

v

2 n

T

(3-9)

Where v2nres is the noise due to the resonator and v2nT represents all other noise sources referred to the node nT, shown in Fig. 3-6. Assuming Rf ×Avga = Rx:

vn2T

=

v

2 nres

A vga

+

v

2 na

F2

+

v

2 nvga

(3-10)

v2nres

=

4 kT R x

= 4 kT

R eff Q

(3-11)

F

=1+

Rx Avga Zin

=1+

R eff rCin Avga Q

(3-12)

Phase noise reduces to:

S (f m ) =

A

2 vga

Peff

 

4kTQ

 

A

vga

+

Q2 R eff

 

v n2a

F

2

+

v 2nvga

 

+

  

4kT 1 + A vga

Q

A

2 vga



+

1 R eff

 

v

2 na

F2

+

v 2nvga

 

 

fr 2fm

 2 

   

=



NF

+ 1

f2

(313)

At offset frequencies, fm, greater than the oscillator loop bandwidth, (fr/2Q), S (fm ) is equal to the phase noise floor, NF , or the level of white phase noise.

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

39

 NF =

A 2vga Peff

 

4kTQ A vga

+

Q2 R eff

 

vn2a

F2

+

v2nvga

 

 

(3-14)

For offset frequencies less then the loop bandwidth, the noise shaped by the resonator

dominates (noise terms multiplied by (fr (2 Q fm ))2 ), resulting in the region of phase noise
referred to as1/f2 or 1 f 2 noise.

1 f 2

=

 

 1

f

2

 

1 f m2

=

A

2 vga

Peff

 4kT (1 + Avga )



Q

A

2 vga

+

1 R eff



v

2 na

F2

+

v

2 nvga

 

fr 2fm

2

(3-15)

We can now use (3-13) to examine how Q affects phase noise. There are several interesting cases. Case 1: Optimum Phase Noise
The optimum phase noise occurs when Avga = 1 and Cin = 0. However, when Cin is non zero, the minimum phase noise is obtained when Avga = 1, and

Rx

=

R eff Q

=

1 oCin

= Zin

In this case phase noise (3-13) simplifies to:

(3-16)

S

(fm

)

=

r

1 k m1 x b2

  





4 k T +r

Cin

 

4

vn2a

+ vn2vga

 



Q

+

1 Q

8

kT

+

r

Cin

 

4

vn2a

+ vn2vga

 

 

fr 2fm

2 

   

(3-17)

It is apparent from (3-17) that the phase noise floor increases with Q while the 1/f2

component of phase noise is inversely proportional to Q. As a result, resolution (3-4),

which is proportional to the area under the curve in Fig. 1c, has an optimum with respect

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

40

to Q. Equation (3-17) can be substituted into (3-4) to solve for the resonator Q that yields optimum sensor resolution for a given bandwidth, BW. The resonator Q giving the optimum sensor resolution is:

Qopt =

 31 +  

1+

r Cin 4kT

1



4v

2 na

+

v 2nvga



    

fr 2 BW

(3-18)

Equation (3-18) suggests that as bandwidth increases the optimum Q goes down. This makes sense intuitively because as bandwidth increases, the phase noise floor, which is proportional to Q, becomes the dominant term in the calculation of resolution. As a result, phase noise and resolution can be optimized by setting Q = Qopt, Rx = Zin, Avga =1, and xb = xmax. Case 2: Amplifier noise is insignificant
It can also be shown that even when Rx  Zin, Avga 1, and xb  xmax resolution is optimized when Q  Qopt. Consider the case when the noise from the MEMS resonator is much larger than the noise contributions due to the amplifiers. Typically this occurs when the resonator has large a motional impedance. In this case phase noise simplifies to:

S

(fm ) 

1 Peff

  

4kTQ

A vga

+

4kT

1

+A Q

vga



 

fr 2fm

 

2

  

And the optimum Q is:

(3-19)

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

41

Qopt =

3

1

+ Avga A vga

 

fr 2 BW

(3-20)

Case 3: Resonator noise is insignificant Finally when the resonator noise is small compared (small Rx) to the amplifier noise
the phase noise simplifies to (3-21). In this case there is no optimum.

S (fm ) 

A2vga Peff

 Q2

  

R

eff

 

v2na

+

vn2vga

 

+

 

R

1 eff

 

vn2a

+

vn2vga

 

 

fr 2fm

2 

   

(3-21)

3.3.3 Effect of Peak Deflection on Phase Noise So far we have shown how Q affects phase noise. Now we examine how deflection
affects phase noise in a resonant sensor. Equation (3-5) indicates that phase noise improves with increasing xb. Therefore, in order to get a resolution estimate one must determine the maximum possible deflection, xmax. This deflection can be limited by mechanical characteristics of the resonator such as maximum distance the resonator can physically move. It can also be limited by system requirements such as the maximum available voltage used to drive the resonator. In many cases xmax is limited by resonator nonlinearities [30, 31, 32, 33]. These nonlinearities can result in phase noise that actually increases with increasing resonator deflection. In the following section we will detail these effects.

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

42

3.3.4 Critical Deflection and Phase Noise There have been a number of publications [30, 31, 32, 33] on how MEMS resonator
power is limited by mechanical and or electrostatic nonlinearities that result in a 3rd order spring constant, k3. Most refer to [34] who determined the critical deflection, xc, beyond which a system represented by (3-22) displays hysteresis known as duffing.

m &x& + b x& + km1x + k3x3 = F(t)
The critical deflection is:

(3-22)

xc =

32 93

k m1 k3 Q

=

x eff Q

(3-23)

According to [30, 31, 32, 33] this deflection, xc, represents the maximum amplitude of oscillation beyond which the oscillation may become chaotic. Therefore the 3rd order nonlinearity can limit the maximum power delivered to the resonator, and hence resolution. In this case, the maximum power is:

PMAX

=

r Q

k

m1x

2 c

=

r Q2

k

m1x

2 eff

=

Peff Q

(3-24)

This is an important result because Q limits the maximum power! At this point however there is little evidence in the literature that this is the actual limiting phenomenon. Most work referring to this limit, report results for open loop measurements. However, when placing the resonator in a feedback loop (oscillator), the criteria for instability versus deflection may change and xc may not be the true limit. There is some evidence supporting this hypothesis. For instance, [35] demonstrated an

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

43

oscillator that operates with resonator deflections greater than xc. In [35], operation beyond xc caused the oscillator phase noise to exhibit high 1/f3 phase noise and an even higher order noise (1/f4). Clearly more research needs to be done to understand the effect of nonlinearities on oscillator performance.
Assuming deflection is limited by the duffing effect, we can replace xb in (3-17) with xc. The phase noise now becomes:

S (fm )

=

1

r

k

m1x

2 eff

  



4

kT+r

Cin

 

4

v2na



+ v2nvga

  Q 2

+

 8 kT

+

r

Cin

 

4

vn2a

+

v

2 nvga

 



 

fr 2fm

 

2

   

(3-25)

This is similar to the result in [33]. Note that there is no optimum with respect to Q, and increasing Q will cause sensor resolution to get worse!

3.3.5 Peak Deflection and 1/f3 Phase Noise

It was shown above that phase noise has two components, NF and 1 f 2 , resulting

from white noise in the oscillator loop. This analysis ignored the effect of flicker noise.

Flicker noise or 1/f noise also contributes to phase noise, resulting in 1 f 3 phase noise.

1 f 3 occurs when nonlinearities mix the flicker noise up to the frequency of oscillation,

fr. In electro-statically driven resonators, the flicker noise is mixed up to fr through the transduction nonlinearity relating electrostatic force, Fe, to resonator drive voltage, vd (i.e.

Fe ~

1 2

C x

v

2 d

).

This

noise

is

then

converted

to

1 f 3

phase noise by two mechanisms. The

first is simply up-converted flicker noise shaped by the oscillator feedback loop, yeilding 1/f3 phase noise.

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

44

2 1

f3

=

Kf Vd2c



fr 2Q

2

1 fm3

(3-26)

Where Kf is the aggregate flicker noise coefficient representing all flicker noise referred to the output of the oscillator (Fig. 3-6). The largest component of 1/f3 noise is caused by the second mechanism due to mechanical and or electrostatic nonlinearities. Specifically nonlinearities that result in a 3rd order spring constant, k3. The resulting nonlinear spring constant causes the natural frequency, n, of the resonator to be dependent on its peak deflection xb as shown in (3-27).

n = r

1 +

3 4

k3 k m1

xb

2  



r

+

3 8

r

k3 k m1

xb

2

(3-27)

It can be shown [Appendix A] that the up-converted flicker noise modulates xb, resulting in:

2 1

f3

=

1

f

3

 

1

f

3 m

=

9 16



f

r

k3 k m1

2

Kf Vd2c

x

4 b

1 fm3

(3-28)

From (3-28) it is obvious that the optimum Q is not affected by the addition of 1/f3 noise to the model. Also, 1/f3 phase noise degrades with increased resonator deflection. Typically, 1/f3 phase noise is dominant at very small offsets from the oscillator center

frequency. Hence for low bandwidth sensor applications, such as inertial sensing, maximizing xb may not improve sensor resolution because it will maximize 1/f3 phase noise as well.

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

45

3.3.6 Summary of Effect of Bandwidth, Q, and Resonator Deflection on Resolution To summarize the effect of BW, Q and xb on phase noise and resolution, we can look
at the case where amplifier noise is insignificant as an example since we obtain similar conclusions for the other cases detailed in section 3.3.2. In that case the oscillator phase noise (Fig. 3-7a) is:

S (fm ) 

1

r

k

m1x

2 b



 

4kTQ

A

vga

+

4kT 1 + A vga Q

  fr  2 fm

2 

  

+

9 16

 

fr

k3 k m1

2 

Kf Vd2c

x

4 b

1

f

3 m

and hence:

(3-29)

(resolution)2 

1



fr q

2


BW

fm2

 

Q

x

2 b

+

1

Q

x

2 b

+

x

4 b

 

(3-30)

Fig. 3-7b graphically illustrates how resolution, which is proportional to the area under the curve, is affected by the choice of, Q and xb for a given sensor bandwidth. We can see that increasing Q and xb arbitrarily does not optimize phase noise and sensor resolution. Instead, there is an optimum value for Q that is dependent on the bandwidth of the application:

Q

=

Qopt



fr BW

(3-31)

In addition, deflection (xb) should not be arbitrarily increased for all sensor bandwidths. For low bandwidth applications (BW  fc32) (see Fig. 3-7), maximizing the resonator

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

46

deflection is not optimum, because 1/f3 noise increases. However for large bandwidth applications (BW  fc2n) the noise floor dominates and xb should be maximized.

Fig. 3-7: How Q and xb affect phase noise and resolution.
3.3.7 Ultimate Resolution for a Resonant Sensor It is interesting to compare the frequency resolution predicted by (3-1) to the
resolution predicted by this section. First note that in [1] it was assumed that all sources of noise are zero except for the resonator noise, Avga = 1, and the resonator is linear (i.e. k3 = 0). If we make these assumptions then equation (3-9) reduces to:

3.3 Resonant Frequency Measurement Using an Oscillator (Resolution)

47

vn2out (fm )

=



fr 2Qfm

2 vn2res

The phase noise from equation (3-13) becomes:

(3-32)

S (fm ) =

1 Peff



4kT Q



fr 2fm

2

=

1 r k m1x b2



4kT Q



fr 2fm

2

(3-33)

Integrating over the desired sensor bandwidth we obtain the frequency resolution in hertz:

f =

f

2 m

S

(f

m

)

f

m

=

1 2

BW

r k m1Q

x

2 b

kT BW

(3-34)

Thus we obtain the same result as [1] which is the minimum detectable change in frequency possible. Note that this prediction for resolution is unrealistic except for low bandwidth applications (BW << fc2n) because of the assumptions made to derive it. Assuming the absence of a phase noise floor (i.e. no noise from electronics) or and nonlinearity exists makes this prediction of resolution very optimistic! Further more, due to the above assumptions it does not predict that there is an optimum Q and xb for a specified sensor BW!
A more realistic prediction would be to assume amplifier noise can be made insignificant but that the noise from the feedback resistor, Rf remains (Fig. 3-6). Also it can be assumed Rf = Rx (i.e. Avga =1). We can also assume that the DC voltage source providing the resonator bias (Fig. 3-6) has a flicker noise source with a coefficient of Kf. In this case, phase noise reduces to the result shown in equation (3-29). Calculating the frequency resolution for this case we get:

3.4 Discussion

48

( )f 

1

r

k

m1x

2 b

  

4kTQ 

fm3 ax

- 3

f

3 min

 

+

2 kTr2
(2)2 Q

fmax - fmin

  

+

9 16

 

fr

k3 k m1

2 

Kf Vd2c

x

4 b

ln

f max f min

 

(3-35)

Where the bandwidth, BW, is equal to fmax ­ fmin. This resolution model accounts for the existence of a phase noise floor and nonlinearity and therefore it predicts that resolution does not improve by arbitrarily increasing Q or xb.

3.4 Discussion
In this chapter we discussed the three different methods for detection of the sensor resonant frequency. It was shown the both slope and phase detection are inferior to detection using an oscillator because of their limited bandwidth. In addition an analytical model was developed for the oscillator detection system. There are many important observations that can be inferred from this model. The most important is that there is a Q and deflection (xb) that will optimize resolution of the sensor for a specified sensor bandwidth. The other ways to improve resolution follow directly from (3-13). They are:
1. Minimizing Cin and matching the impedance of the resonator with the input impedance Zin (3-16).
2. Increasing the stiffness (km1) and/or resonant frequency of the resonator. 3. Reducing the ratio of k3/km1 (3-28) by reducing mechanical and electrostatic
nonlinearities that contribute to k3.

49
CHAPTER 4: DETF RESONANT STRAIN SENSOR AND SQUARE
WAVE DRIVE OSCILLATOR
4.1 DETF Resonant Strain Sensor
The MEMS double-ended tuning fork (DETF) resonant strain sensor designed in this work is shown in Fig. 4-1. The sensor was fabricated with the Robert Bosch GmbH commercial surface micromachining process, which has two poly-silicon layers [36]. The first layer is used for routing and the second is the structural layer with 10.6 micrometer (µm) thick polysilicon. A photograph of one of the fabricated sensors is included in Fig. 4-2. Separate comb drives are used to excite the DETF into resonance and sense its motion. The measured DETF beam width is 5.67µm and its length is 200µm. Its measured resonant frequency, fr, was 217 kHz with a Q of 370 at atmospheric pressure [2]. To characterize the strain sensitivity of the resonators an electrostatic actuator that applies axial force and therefore produces an axial strain was added to the design (Fig. 4-1). The strain actuator is composed of 14 parallel plate actuators that are 496µm long and have a measured gap of 2.74 µm. Note that the actuator in Fig. 4-1 has only 10 parallel plate actuators. Table 1 summarizes the resonator parameters and its corresponding electrical equivalent model in Fig. 4-3.

4.1 DETF Resonant Strain Sensor

50

Fig. 4-1: Example layout of DETF resonant strain sensor.
The sensor was designed for a 10kHz bandwidth and hence, for this application the phase noise floor is the dominant source of noise affecting resolution. To minimize the phase noise floor, the sensor deflection, xb, has to be maximized while operating at the optimum Q (see chapter 3). The DETF design and resonant frequency were kept close to previous work [5, 37] for comparison. Note that [5, 37] had resonant frequencies close to 200kHz. Therefore the optimum Q is approximately 200kHz/10kHz = 20! Because the optimum Q for this design is less than the Q at atmospheric pressure it was decided to operate the sensor at atmospheric pressure. Hence avoiding the necessity of placing the sensor in a pressurized chamber.

4.1 DETF Resonant Strain Sensor

51

Fig. 4-2: Photograph of DETF resonant strain sensor.

Table 4-1: DETF resonant strain sensor parameters.

Process Parameters Device layer thickness Minimum Gap (measured)
DETF Parameters Number of Drive gaps Number of Sense gaps Comb finger overlap (drawn) Length (drawn) Width (measured) Parasitic Capacitance Measured Q in air

Symbol td g
Symbol Nd Ns lf L w Cft Q

Value 10.6 µm 2.74 µm Value
64 64 15 µm 200 µm 5.67 µm 70 fF 370

4.1 DETF Resonant Strain Sensor

Calculated comb mass Effective mass of DETF beam 1st order spring constant 3rd order spring constant Calculated Resonant frequency
Measured Resonant frequency
Calculated Strain Sensitivity Measured Strain Sensitivity Strain Actuator Parameters
Actuator length Number of actuator gaps Actuator dCa/dx (modeled)

Mc Mb km1 k3 foc
fo
Sc Sa Symbol
la Na dCa/dx

52
331.5 ng 11 ng
636.7 N/m 7.031× 1012 N/m3
216 kHz
217 kHz
36 Hz/µ 39 Hz/µ Value
496 µm 14
101.4 fF/µm

Fig. 4-3: Electrical equivalent model of DETF resonant sensor (Vdc = 84V).

4.2 Challenges of low Q oscillator design (Feed-through Capacitance)

53

4.2 Challenges of low Q oscillator design (Feed-through Capacitance)
An oscillator feedback loop forces the DETF into resonance by sensing its output current and applying an appropriate force to maintain oscillation. One of the difficulties in making an oscillator with low Q MEMS devices is their high motional impedance, Rx (Fig. 4-3). Due to this high impedance, the output of the MEMS device can be quite small. As a result, unwanted parasitic capacitances (such as Cft) in parallel with the MEMS device (Fig. 4-3) can make measurement of the MEMS output impossible. Even with very small values of Cft the current through this capacitor can be many times larger than the DETF current. It can be shown that if the current through Cft exceeds two times the DETF current, oscillation with a sinusoidal-output oscillator is nearly impossible. The next section details how Cft causes sinusoidal-output oscillators to fail.
A sinusoidal-output oscillator has an amplitude control feedback loop that limits the peak output voltage, Vout, of the oscillator (Fig. 4-4). It does so by forcing the oscillator loop gain to be equal to one when the desired peak output level, vd, is attained. Typically, a variable gain amplifier (VGA) is used in the oscillator feedback loop to adjust the loop gain. Therefore in steady state, when the oscillator loop gain is one, the VGA gain is: Avga = -Rx/Rf. In addition, the desired output level is set lower than the available supply voltage to avoid amplifier clipping. If designed correctly the output of the oscillator will be sinusoidal with a peak output voltage of vd.
For oscillation to occur a sinusoidal oscillator consisting of a DETF and feedback electronics in Fig. 4-5a must meet two conditions. First, the loop gain at the frequency of oscillation should be greater than one. Second, the phase shift of the loop at that

4.2 Challenges of low Q oscillator design (Feed-through Capacitance)

54

frequency must be zero. In examining the effect of Cft, the latter is most important. Typically, the phase shift through the electronic feedback circuitry is designed to be near zero degrees at the resonant frequency, fo, of the DETF.

Fig. 4-4: Example of an oscillator with an amplitude control feedback loop Thus allowing the rapid phase transition of Isense around the DETF resonant frequency (Fig. 4-5b) to determine the frequency of oscillation. However, if the parasitic feedthrough capacitance, Cft, is too large, the phase shift of Isense (Fig. 4-5b) will never reach zero degrees. As a result, oscillation may not be possible. Therefore the main issue for making an oscillator with low Q is overcoming the deleterious effects of parasitic feed through capacitance. It can be shown that the phase through the resonator will never reach zero degrees for:

Cft

>

max(Cft )

=

Q 2

Cx

=

1 4fr Rx

(4-1)

4.2 Challenges of low Q oscillator design (Feed-through Capacitance)

55

Here Cx and Rx are the motional capacitance and resistance in the resonator linear model (Fig. 4-5a). As a result, we can determine the minimum Q required for oscillation:

Qmin

=

2

Cft Cx

= 2 Cft

k m1

 

C x

Vdc

 

2

(4-2)

Fig. 4-5: a) Simplified sinusoidal-output (linear) oscillator. b) Phase shift through the parallel combination of the resonator (RLC) and Cft.
For robust sinusoidal-output oscillator design we require Cft  max(Cft)/5 or Q  5× Qmin. For example the resonator presented in this work has a Cft = 70fF and requires a Q

4.3 Square Wave Drive Oscillator

56

in the range 6380 to guarantee oscillation (at a bias voltage of 84V). This is one of the main reasons why resonant sensors need to be operated in a vacuum. However, by increasing Q to ensure oscillation, resolution is adversely affected. For a sinusoidaloutput oscillator Cft can become the limiting factor with respect to phase noise and resolution. This occurs when the minimum Q required for oscillation due to Cft is greater than the value of Q needed for optimum resolution or:

Qopt

 5 × Qmin

= 10

Cft Cx

(4-3)

For the strain sensor design in section 4.1, the feed-through capacitance would have to be ~ 0.2 femto-farads (fF) for 5×Qmin = Qopt. For our design at atmospheric pressure Q = 370. As a result, 5×Qmin must be less than or equal to 370 to use a sinusoidal oscillator. This requires Cft to be less the 4fF. Therefore using a sinusoidal-output oscillator with this sensor at atmospheric pressure will not work. We overcome this limitation by driving the resonant sensor with a square wave instead of a sinusoid.

4.3 Square Wave Drive Oscillator

4.3.1 Operation The operation of the SWO oscillator presented in [2] is based on the fact that when
the resonator and Cft are driven with a square wave, the components of Isense due to Cft, ICft, and the resonator, IDETF, can be separated in time (Fig. 4-6). This is accomplished by detecting the first zero crossing of the Vsense = Rs×Isense, following a rising or falling edge of the square wave (Fig. 4-6b).

4.3 Square Wave Drive Oscillator

57

Fig. 4-6: Illustration of how the parasitic component ICft can be separated by driving the sensor with a voltage step: a) Model to illustrate how separation of IDETF and ICft is accomplished. b) Step response of model.
IDETF determines the time of the zero crossing since ICft has decayed to zero at this point (Fig. 4-6b). Using this method [38], an SWO can enable oscillation in the presence of feed-through capacitances much larger than a sinusoidal oscillator will allow. Note that we define a sinusoidal oscillator as one in which the voltage used to drive the resonator is sinusoidal.
A square wave oscillator (SWO) circuit that accomplishes this separation is shown in Fig. 4-7a. The circuit applies a voltage step every half period (Fig. 4-7b). One half period after a rising or falling edge of VDrive, the component due to Cft decays to zero. At this time, the contribution of the parasitic capacitance is zero and the DETF solely

4.3 Square Wave Drive Oscillator

58

determines the timing of the zero crossing of Vsense. A comparator determines when the zero crossing occurs, and applies a new voltage step to the resonator.

Fig. 4-7: Example of SWO oscillator and its operation. a) SWO oscillator. b) Expected output waveforms of SWO oscillator.

The SWO oscillator used in this work (Fig. 4-8) uses an integrator front end. A second differentiator stage is used to obtain a zero degree phase shift at the resonant frequency. A comparator is then used to close the loop. An important design consideration is the maximum value of Cft that can be tolerated for proper operation. The maximum value of Cft that can be tolerated is:

max

(Cft )

=

1 2

C1 R 2 R3

(4-4)

4.3 Square Wave Drive Oscillator

59

Larger values of Cft will cause the output of the second stage (VSense in Fig. 4-8) to hit the maximum supply voltage. However, by changing the values of C1, R2 and R3 the circuit can operate over a large range of Cft.

Fig. 4-8: Simplified schematic of SWO oscillator implemented on a PC board.

The magnitude (4-5) and phase (4-6) of the linearized circuit are, respectively:

H(s)



G

c

  

s

R1 R1 C1

+

 1

  

s

s R3 C2 R2 C2 +

 1

(4-5)

arg(H(s))



 2

-

atan(R1 C1)

-

atan( R 2

C2)

(4-6)

4.3 Square Wave Drive Oscillator

60

Where Gc is the comparator gain. To ensure oscillation, the component values for H(s) must be chosen to such that the phase shift is close to zero at the sensor resonant frequency and the gain is greater than Rx. A plot of the magnitude and phase of H(s) is provided in Fig. 4-9.

Fig. 4-9: Magnitude and phase response of linearized SWO oscillator.
Finally, this circuit will oscillate when the DETF bias is zero. When the bias is zero, the output current of the DETF is zero, and only Cft determines the frequency of oscillation. In fact the circuit in Fig. 4-8 is an oscillator that is injection locked to the DETFs resonant frequency. However, in order for the circuit to lock correctly, the unlocked frequency, fUL, must be designed such that it is greater than the natural frequency of the DETF. This ensures that Cft does not affect the oscillation frequency when the resonator is biased. A lower bound for this frequency is given by:

4.3 Square Wave Drive Oscillator

61

1 f UL



2R2 C2

ln 

1 2

R2 R1

C2 C1

  

(4-7)

Using these design equations the SWO can be designed for a variety of DETF resonant frequencies and feed through capacitances. A photograph of the PC board implementation of the SWO oscillator and its schematic are provided in Appendix B.

4.3.2 SWO Phase Noise An analysis similar to the one described in chapter 3 for the trans-impedance
oscillator can be done for the SWO oscillator. It is difficult to derive an analytical equation describing the output noise of the SWO oscillator (Fig. 4-8) due to the fact that its gain is both nonlinear and frequency dependent. Therefore we first quantify how the nonlinearity due to the comparator affects noise in the circuit.
Using the nonlinear SWO oscillator causes phase noise to be larger than it would be if a sinusoidal (linear) oscillator were used. This penalty due to the nonlinearity can be calculated using the simple models shown in Fig. 4-10. Consider the linear oscillator in Fig. 4-10a. The phase noise floor for this oscillator can be derived using equation (3-5). It is:

Linear Osc. Noise Floor =

vn2out 12 Vo2sc

=

 

R R

x g

2 

vn2oise 12 Vo2sc

= AL2

v2noise 12 Vo2sc

(4-8)

However for the nonlinear oscillator (Fig. 4-10b) the effect of the limiter must be taken into account.

4.3 Square Wave Drive Oscillator

62

Fig. 4-10: Models used for comparison of a sinusoidal-output (linear) and SWO (nonlinear) oscillators: a) Sinusoidal-output equivalent of SWO oscillator. b) SWO
model.
When the limiter is operating in its linear region, it has a gain of A. This is true for voltages less than Vs/A at the input of the limiter. However for greater voltages the gain of the limiter is zero. In steady state oscillation the input to the limiter will be equal to:

Vint

=

1 AL

4 

Vs

sin(2



f

r

t)

+

v

noise

(4-9)

Assuming the noise term is much smaller than the sinusoidal term in (4-9), it can be

shown that the noise, vn2oise , will be modulated by the effective gain shown in Fig. 4-11. As a result, if the noise bandwidth is greater than fr, noise folding occurs, thus increasing the overall noise at the output of the oscillator.

4.3 Square Wave Drive Oscillator

63

Fig. 4-11: Simplified model for calculating affect of limiter on output noise of SWO oscillator: a) The time, , over which vnoise sees a gain of A. b) The time varying gain of
the SWO limiter.
The phase noise floor of the nonlinear oscillator can be written as (assuming the noise is white):

SWO Noise

Floor

=

v2nout 12 Vo2sc

=



AL 2

2

 

n



= -

sinc

n

AL 2A



2 

vn2oise 12 Vo2sc

=



AL 2

2 

v

2 noise

12 Vo2sc

Therefore the penalty for using the nonlinear oscillator is:

(4-10)

SWO Noise Floor Linear Osc. Noise Floor

=

1 4

  n



= -

sinc

n

AL 2A



2 

=

 4

(4-11)

Using the values from Fig. 4-8 and Table 4-1, the noise penalty (4-11) was calculated to be 42. If the noise at the input of the limiter has a finite bandwidth that is smaller than the

4.3 Square Wave Drive Oscillator

64

frequency, 2×fr (i.e. 1/f noise or filtered noise) the effect of folding on this noise is small. As a result for this noise 1 and 1/f noise at the node, Vint, is multiplied by a gain of
(AL 2)2 when referred to the output of the oscillator. Hence, the noise penalty for low
frequency noise is:

 1

f 3 (SWO)

 1

f 3 (Linear)

=

1 4

(4-12)

This is an interesting result because it implies that 1/f noise is actually attenuated at the output of the nonlinear oscillator when compared to the 1/f noise at the output of the linear oscillator.
Using the results above we can estimate the phase noise of the SWO oscillator by simplifying the circuit in Fig. 4-8 to the linearized model in Fig. 4-10a. The nonlinearity due to the comparator folds high bandwidth (BW >> fr) noise, multiplying it by a noise penalty. Noise that has an effective bandwidth much less than fr (i.e. 1/f noise or filtered noise) is not multiplied by the penalty. For instance noise due to the feedback resistor, R1 and the resonator are low frequency noise. Thus they are not multiplied by the noise penalty. Typically these noise sources are added to the calculation, but in this case their noise contribution is insignificant compared to the other noise sources that are multiplied by the noise penalty. The significant noise sources due to the two amplifiers, R2 and R3 are referred to Vint which approximates the total noise of the oscillator fairly well. Thus, the phase noise can be estimated with:

4.3 Square Wave Drive Oscillator

65

S (fm ) 

1 12 Vo2sc





AL 2

2

   

Vn2oise

+

Vn2oise

 

2

fo Q fm

2 

   

+

9 16

 

fo

k3 k m1

 

2 

AL 2

2

Kf Vd2c

x

4 b

1

f

3 m

Where the output referred noise of the oscillator is:

(4-13)

Vn2oise



Vn2a1 1 +

R x o AL

Cin

2

+

4 kT R 2

+

4 kT R3

G

2 diff

+ Vn2a2

(4-14)

Note that Gdiff is the differentiator gain and Rg is the gain of the integrator at the resonant frequency of the DETF. Also note that Kf is the flicker noise coefficient for the first amplifier in Fig. 4-8. Finally, Vosc = (4/)×Vs. Where Vs is the peak value of the square wave driving the resonator. Using the values in Table 4-1, and Table 4-2 the phase noise can be estimated. A plot of the estimated phase noise is included in Fig. 4-13. Equation (4-13) predicts the single sided phase noise floor to be ­120 dBc/Hz. Finally the SWO oscillator was simulated with a VGA replacing the comparator in Fig. 4-8 and setting Cft = 0. Therefore if Cft could be reduced enough to allow the use of a linear oscillator, even further reduction in phase noise could be achieved. The resulting linear oscillator had a simulated noise floor of -133 dBc/Hz, which is close to the expected value of -136 dBc/Hz (Fig. 4-13).

4.3 Square Wave Drive Oscillator Table 4-2: Oscillator noise parameters.

Oscillator Noise Parameters

Symbol

Peak Output Voltage Differentiator Gain
Integrator Gain
AL Flicker Noise Coeff. Input Capacitance Parasitic Capacitance Input noise OPA655 Input noise AD8038

Vs Gdiff
Rg
AL Kf Cin Cft vna1 vna2

Effective Gain = Gc×Gdiff (Fig. 4-11) Time duration of gain (Fig. 4-11)

 

Noise Penalty

/4

Value
3.7 V 2.86 V/V
731 k 25.5 V/V 4×10-14 V2
3 pF 70 fF 6 nV/Hz 8 nV/Hz 2145 V/V
13.63 ns
42.1

66

Fig. 4-12: Calculated SWO phase noise.

4.4 DETF Strain Sensor Measured Results

67

Fig. 4-13: Simulated SWO phase noise.
4.4 DETF Strain Sensor Measured Results
The SWO oscillator shown in Fig. 4-8 was implemented on a PC board (Appendix B). The measured oscillator output waveforms of both Vout, and Vsense, for resonator bias voltages of 28V and 84V are shown in Fig. 4-14. They agree well with results predicted in Fig. 4-7b. The SWO oscillator successfully resonates the DETF with a bias voltage as low as 28V despite a high Cft (i.e. 70 fF) at atmospheric pressure (Q=370). At this bias the resonator has an effective Rx  162 M. In this case an equivalent sinusoidal oscillator would require: 1) a Q larger than 57000 for Cft = 70fF, or 2) a Cft less than 0.5 fF if the Q is 370.

4.4 DETF Strain Sensor Measured Results

68

Fig. 4-14: Measured output waveforms of SWO oscillator.
To measure the strain sensitivity, an axial force was applied to the actuator as shown in Fig. 4-1. The resulting change in resonant frequency was measured with an Agilent 53131A frequency counter. The measured sensitivity, f/ = 39 Hz/µ,  corresponds to the slope in Fig 4-15 and is in good agreement with the analytical model [9] that predicts a sensitivity of 36 Hz/µ or 165 ppm/µ.

4.4 DETF Strain Sensor Measured Results

69

Fig 4-15: Measured SWO frequency vs. strain (Sensitivity).
Next, a temperature-controlled chamber and a frequency counter were used to measure the temperature sensitivity of the oscillator (Fig. 4-16). The sensitivity was found to be ­6.8 Hz/ºC or ­33 ppm/ºC. The expected temperature variation of the resonant frequency due to youngs modulus is approximately ­34 ppm (chapter 2). Due to this large sensitivity, temperature compensation is necessary to achieve good resolution. In addition, this suggests that temperature can result in low frequency drift that may cause 1/f3 phase noise. An Agilent E5501A phase noise measurement system was used to measure the single sided phase noise, L(fm), of the oscillator with a bias voltage of 84V (Fig. 4-17).

4.4 DETF Strain Sensor Measured Results

70

Fig. 4-16: Measured SWO frequency vs. Temperature.
Note the dotted lines represent a curve fit for the measured data. The resolution can be calculated from the measured phase noise and is 18 nano-strain (n) in a 10kHz bandwidth. If this calculation is done with only the phase noise floor we obtain the same result (18 n). Thus for this bandwidth (10kHz), the 1/f2 and 1/f3 noise are insignificant and the phase noise floor dominates. Finally, the measured noise floor and 1/f2 components match well with calculated and simulated results (Table 4-3 and Fig. 4-17). The simulated 1/f3 phase noise, due to amplifiers only, matches calculations. However it is insignificant compared to the measured 1/f3 noise (Table 4-3). Therefore the measured 1/f3 noise may be caused by some other 1/f noise source other than the amplifiers. Alternately, it may be due to a nonlinear mechanism that has not been identified. At the

4.4 DETF Strain Sensor Measured Results

71

moment the source of the large 1/f3 noise is not known but it is under investigation requiring a more sophisticated model of the oscillator.
Table 4-3: Measured and calculated phase noise coefficients.

S (fm ) = NF + 1 f 2 fm2 + 1 f 3 fm3

Phase noise Coefficients Calculated

Measured (curve fit)

 NF

1.66×10-12 Hz-1

1.43×10-12 Hz-1

1 f 2

2.45×10-12 Hz

2.39×10-7 Hz

1 f 3

1.77×10-10 Hz2

4.02×10-5 Hz2

Fig. 4-17: Measured and simulated phase noise of SWO oscillator.

4.5 Discussion

72

The measured noise floor for the SWO oscillator is ­120 dBc/Hz. To the authors knowledge this is the best noise floor published to date for a MEMS resonator in this frequency range. Table 4-4 provides a comparison of our results to recent work. Note that the oscillator has a better noise floor than previous works that include the use of integrated electronics (i.e. with low Cin and low Cft). The results show clearly that high Q operation is not necessary to improve phase noise, as predicted in chapter 3.
Table 4-4: Comparison of SWO oscillator phase noise floor to previous work.

T. Roessig, C. T.-C. Nguyen, A. Seshia,

1997, [37]

1999, [39]

2002, [5]

M. Seth, 2004, [23]

This Work

Integrated Electronics, Vacuum

Both

Both

Both Vacuum None

Resonant freq. 175 kHz

Motional

Not

Resistance, Rx Reported

Q 17000

Phase noise floor (dBc/Hz)

-70

1Taken from figure 9 in [5].

16.5 kHz 3.8 M 51000
-70

145 kHz
Not Reported
10000

57 kHz 2.5 M 14000

-751 -83

217 kHz 18M
370 -120

4.5 Discussion
This chapter demonstrated that operation at or close to the optimum Q derived in chapter 3 can improve phase noise and hence resolution of resonant sensors. The main

4.5 Discussion

73

obstacle to operation at the optimum Q is the parasitic feed-through capacitance (Cft). The resonant sensor in this work would require a Cft less than 4fF for a sinusoidal-output oscillator to oscillate successfully with a Q = 370. Implementing a resonator with such a small feed-through capacitance is difficult even with integrated electronics and differential resonator topology. We solved the feed-through problem with the SWO oscillator. The comparator nonlinearity causes the SWO oscillator noise to be multiplied, thus incurring a noise penalty when compared to sinusoidal-output oscillators. However, even with this penalty the SWO oscillator performed better than previous work (Table 4-4).

74
CHAPTER 5: FREQUENCY MEASUREMENT TECHNIQUIES
5.1 Introduction
One of the goals of this research was to develop a DETF strain measurement system with a resolution of 0.1 microstrain (µ) in a 10kHz bandwidth. The first half of this measurement system (DETF oscillator) was presented in chapter 4. However the DETF oscillator alone is not a complete measurement system (Fig. 5-1) because it does not provide a method for demodulating and digitizing the output of the oscillator.
Fig. 5-1: Oscillator based measurement system.

5.2 Frequency measurement requirements: Strain Measurement System

75

In this chapter a circuit block is presented that performs these functions. The specifications for the frequency measurement block are first defined, followed by an evaluation of several methods of frequency measurement. Finally, out method of choice for frequency measurement is presented.

5.2 Frequency measurement requirements: Strain Measurement System

In this section we define the frequency and/or period resolution required for the strain measurement system. The system is to have 0.1 µ (rms) resolution over a 10kHz bandwidth. The DETF oscillator presented in chapter 4 had a resolution of 18 n in 10kHz. Therefore the frequency demodulation/measurement block must contribute less than 98 n to the overall resolution to meet the resolution criteria. In other words, the measurement system must have a frequency resolution, fres, of less than 3.8 Hz or a period resolution, tres, of less than 82 picoseconds (ps).

f res

=

f r 

 res

= 39 Hz µ

98n  3.8 Hz

(5-1)

t res

=

f res

f

2 r

=

39

Hz µ

×

98n

×

(217

1
kHz)2

 82 ps

(5-2)

For a 0.1µe resolution in 10kHz, the signal to noise ratio (SNR) for the frequency measurement system needs to be greater than 77 dB for a full-scale range of ± 1000 µ. Therefore, a ~13 bit frequency and/or time to digital converter is required for this application.

5.3 Frequency measurement methods
5.3 Frequency measurement methods

76

5.3.1 Digital Radio: Digitization Followed by Digital FM Demodulation This method of operates by digitizing the entire spectrum of the signal. Then
demodulation is performed digitally. This type of architecture (Fig. 5-2a) is now starting to be implemented in car radios [40]. By performing the demodulation digitally, unlike previous radio designs, these radios avoid the need to design separate paths for both AM and FM demodulation that previous radio designs had used. This type of flexibility is not necessary for resonant sensor since the output of the sensor is FM modulated only.

Fig. 5-2: AM/FM Digital Radio. a) basic architecture b) Relationship between A/D converter SNR and phase noise.

5.3 Frequency measurement methods

77

The requirement of digitizing the entire spectrum forces the converter to operate at sample frequencies that are several multiples of the carrier frequency of the FM signal. In addition, the FM spectrum is typically much larger than the bandwidth of the modulating signal (see Carsons Rule, [41]). In our sensors case the FM spectrum bandwidth is 98kHz while the sensor bandwidth is 10kHz. From a standpoint of sample rate (power) and bandwidth this method is not optimal. It must operate a sample rates that are much greater than the Nyquist rate (fN=20kHz) while obtaining no benefit from oversampling (fs > fN).
In addition to the high sample rate the A/D converter must convert the FM spectrum of the oscillator without adding additional phase noise. In other words, the digitized oscillator spectrum SNR should not be affected by the A/D quantization noise. It can be shown that the SNR of the A/D converter is related to the phase noise floor the oscillator (Fig. 5-2b) by (5-1), where, fs, is the sample rate of the converter.

SNR

=

1  NF

fs 2

(5-1)

The measured phase noise floor of the DETF oscillator was NF = -120 dBc/Hz (Chapter 4). As a result, for the A/D converter quantization noise level equal to the oscillator noise floor, the converter SNR must be ~65 dB (fs = 3×fr = 651kHz). Therefore, an 11-bit A/D converter is required for our application. Also, to meet the specification of our design the digital demodulator must achieve an SNR of better than 77 dB. One of the best digital demodulators reported to date achieves a 74.7 dB SNR and a 73.8 dB signal to noise and distortion ratio (SNDR) [42]. As a result, this method requires a fairly complicated A/D

5.3 Frequency measurement methods

78

converter design, running at high sample rates, which is not optimal in terms of signal bandwidth or power. Finally, it requires a digital demodulator that achieves an SNR better than any reported to date.

5.3.2 Phase Locked Loop (PLL) demodulation In the past, frequency demodulation for resonant sensors has been done with phase
locked loops [43] (Fig. 5-3). In the system shown in Fig. 5-3, a voltage-controlled oscillator (VCO) is used to estimate the incoming frequency. The VCO is placed in the feedback loop of the PLL. Hence the output of the PLL, Vvco, is a function of the scale factor, Kvco that relates the VCO's output frequency (fvco = Kvco×Vvco) to its input voltage.

Fig. 5-3: Oscillator based measurement system. The VCO voltage output, Vvco, is equal to the demodulated output of the sensor and can be digitized with an A/D converter as shown in Fig. 5-3. In order to digitize the output, Vvco, a 13-bit analog to digital converter is required to meet the 77 dB signal to noise ratio for our application. Like digital radio (above), a high resolution A/D converter must be designed when using this method. However unlike digital demodulation which required the A/D to operate at high sampling rate (fs  3×fr) this method can operate the A/D at the Nyquist rate i.e. fs = 2 × 10 kHz.

5.3 Frequency measurement methods

79

One important aspect of this system is the quality of the VCO. The phase noise of the VCO appears at the output of the PLL [44] in addition to the phase noise of the DETF oscillator. Therefore its phase noise must be better than the resonant sensor oscillators to ensure that the overall resolution of the measurement system is not affected by the VCO. This can be particularly important for phase noise that is close to the carrier frequency. This noise is inversely proportional to Q. Hence the VCO would require a Q > 370 assuming it has a similar output noise and power as the DETF oscillator. Unfortunately, high Q (>100) oscillators are difficult to implement in standard CMOS processes. The second limitation with the VCO is that its scale factor, Kvco, is a function of temperature (T), power supply voltage (Vs) etc. Also, the VCO's output frequency is usually a nonlinear function of its input voltage i.e. Kvco is a function of Vvco. For the PLL shown in Fig. 5-3, Vvco is equal to:

( )Vvco



K vco

f osc T, Vs , Vvco

(5-2)

where fosc is the frequency of the DETF oscillator. Therefore, as indicated by (5-2), variation in Kvco can degrade overall sensor performance.
This system improves on digital demodulation by demodulating the input first before digitizing it, thereby reducing the sample rate of the A/D converter. However it does not reduce the resolution required by the A/D and it introduces phase noise, nonlinearity, and variation due to the VCO.

5.3 Frequency measurement methods

80

5.3.3 Period measurement Unlike the methods described thus far, period measurement techniques accomplish
digitization and demodulation of a FM modulated signal by measuring/digitizing the time between zero its crossings. Hence period measurement combines demodulation and digitization in one step. Converters that perform this operation are generally referred to as time to digital converters (TDCs). The simplest method of period measurement is shown in Fig. 5-4a. In this example, digitization is accomplished by counting the number of reference clock periods that occur during the time between each zero crossing of the oscillator output. This method can digitize every ½ period of the oscillator output (Fig. 5-4b).

Fig. 5-4: Basic period measurement system. a) block diagram. b) signal waveforms.

5.3 Frequency measurement methods

81

Therefore its sample rate is two times the resonant frequency of the oscillator, fr = 217 kHz. Again, the sensor bandwidth, BW, needed is 10kHz. Hence the converter is oversampling by fr/BW or 21.7 times. This inherent oversampling available in period measurement systems can be used to reduce TDC complexity. In fact, by oversampling, the LSB (1/fref) of the TDC can be increased while still meeting the 82 ps (rms) time resolution, tres, required by this application. Since the system in Fig. 5-4 makes a quantization error at the beginning and end of the measurement the total quantization
( )noise made by the TDC is 2 12 fref . Using this result the clock frequency, fref ,required
to meet 82 ps resolution can be calculated (assuming the sample rate is 2×fr):

f ref

=

2 t res 12

BW fr

=

(fr

2

f

2 r

 )res

12

BW fr

 1.5GHz

(5-3)

This means that the LSB of the converter must be ~668 ps. Even with oversampling this method requires a fairly high frequency clock. To avoid this, the Nutt method for time measurement can be used [45]. This method reduces the clock frequency needed by using a 3 step conversion of the time period to be measured, Tm. The first step of the conversion is similar the previous system show in Fig. 5-4. It uses a counter to obtain a course measurement of Tm with a quantization step of 1/fref. The second and third steps measure the time Ta, and Tb with a quantization step of 1/(N×fref).

5.3 Frequency measurement methods

82

Fig. 5-5: Timing diagram of Nutt time measurement method. The total digitized time, TD, measured by the Nutt TDC is (5-4) where Nc is the output of the counter, and Na/Nb are the result of digitizing the time Ta/Tb with an LSB of 1/(N×fref).

TD

= Tc + Ta

- Tb

=

Nc f ref

+

Na N fref

-

Nb N fref

= Tm + quantization error

(5-4)

The quantization steps for the measurement of Ta, and Tb are obtained by dividing the clock with an N-tap delay line. Typically this delay line is implemented using a delay locked loop (DLL), which employs feedback to force the total delay through the delay line to be equal to one clock period. A block diagram of a Nutt converter is shown in Fig. 5-6. The required LSB for this method is still 668 ps. However by setting N = 30 the required clock frequency can be reduced to ~50MHz.

5.3 Frequency measurement methods

83

Fig. 5-6: Simplified Nutt converter block diagram. Time to digital converters can be used for the frequency measurement block of this sensor. They perform demodulation and digitization of the signal at the same time, which is an advantage over the previous methods. However, they must divide the reference clock (i.e. Nutt Method) to achieve high time measurement resolution while maintaining low clock frequencies. Thus the main challenge in TDC design is the design of these dividers (delay lines). The delay lines must have matched delays in the pico-second range. Therefore variation and mismatch in these delays is one of the main problems with TDC's [46]. It is not unusual for a TDC to have values of INL and DNL that are multiples of 1 LSB and therefore most require calibration to remove the nonlinearities [46, 47]. In the following section we will see that high precision period measurement can

5.3 Frequency measurement methods

84

be accomplished without delay lines while using even lower clock frequencies. This is accomplished by shaping the quantization noise of the period measurement system.

5.3.4 Sigma Delta Phase Locked Loop The third frequency measurement method uses a sigma delta phase locked loop
(PLL). A sigma delta phase locked loop (Fig. 5-7) is a hybrid of a PLL and the period measurement system detailed in Fig. 5-4 [48]. Similar to the period measurement system described in the previous section, the PLL demodulates and digitizes the input in the same step.

Fig. 5-7: Block diagram of a sigma delta PLL measurement system. It does so by controlling the counter period such that its output, Cout, is in phase with the input signal, Vout. The loop operates by measuring the difference in time (en = tn - n) between the zero crossings of Vout and Cout. Then it uses en to estimate the length of time until the next zero crossing of Vout (Fig. 5-8). Hence Nout×Tref is an estimate of Tosc/2 where Tosc is the period of Vout.

5.3 Frequency measurement methods

85

Fig. 5-8: Waveforms for PLL. Unlike a VCO, the counter cannot create a signal with an arbitrary period, but can only generate periods that are integer multiples of Tref. Therefore the PLL makes a quantization error, qn, each time it estimates the sensor period. As a result, the output, Nout, of the PLL for a given sample is:

N out



Tosc (n) 2 Tref

+ qn

(5-5)

The PLL samples the period at every zero crossing, or twice the resonant frequency of the sensor. As a result the oversampling ratio, OSR = fs/(2 BW), for this converter is 21.7 or fs = 434kHz and BW = 10kHz.
The major difference between the period measurement system and the PLL is that the PLL loop shapes or moves the quantization noise power out of the band of interest.

5.4 Discussion

86

As a result noise shaping allows the use of a TDC with much larger quantization error (lower fref) while still meeting the resolution goal within the sensor bandwidth (Fig. 5-9).

Fig. 5-9: Example of noise shaping: a) unshaped quantization noise. b) quantization noise shaped or moved out of the signal band by the sigma delta loop.
5.4 Discussion
This chapter reviewed some of the frequency measurement methods available to demodulate and digitize the output of a resonant sensor. Among the methods reviewed, the PLL offers the simplest solution for our frequency measurement application. It will be shown in the following chapter that the PLL can meet the 82 ps resolution with a clock frequency in the range of 10-20MHz. This is accomplished without the use of delay

5.4 Discussion

87

lines. Only a simple digital counter is required. Hence it removes the nonlinearity issues associated with matching delays in a typical TDC. In addition, the required A/D converter (Fig. 5-7) is only 4-5 bits! This is a significant reduction in A/D size compared to the 11 to 13 bits required for other methods. Because of these advantages, this is the method chosen to demodulate and digitize the sensors output.

88
CHAPTER 6: SIGMA DELTA PLL PERIOD MEASUREMENT
SYSTEM
6.1 Sigma Delta PLL Period Measurement System
This chapter will detail the design of the PLL used to measure the output of the resonant sensor. It will describe how the linear model of the PLL is developed. The required order of the sigma delta and the A/D converter size will be determined for our sensor application. Finally the design and measured results of a prototype PLL implemented on a PC board will be discussed.
6.1.1 Linear Model of the Sigma Delta PLL A good understanding of the PLL's basic operation is required to develop it's linear model. Although its operation was described in chapter 5 part of it will be presented here to aid in the development of the linear model. One of the strengths of the PLL (Fig. 6-1) is that it demodulates and digitizes the input frequency in the same step. It does so by controlling the counter period such that its output, Cout, is in phase with the input signal, Vout. The loop operates by measuring the difference in time (en = tn - n) between the zero crossings of Vout and Cout. The loop does this by using a phase detector to generate a pulse (Fig. 6-2) whose area, An, is equal to Kd×(tn - n). Note Kd is the phase

6.1 Sigma Delta PLL Period Measurement System

89

detector gain. An is then used to estimate the length of time, tn+1= Nn+1×Tref, until the next zero crossing of Vout (Fig. 6-2).

Fig. 6-1: Block diagram of a sigma delta PLL measurement system. As a result, there is a delay of one clock period between the time when the error, en = An/Kd, is measured and when that measurement is used to estimate the next time period (Fig. 6-2). This results in a loop delay (z-1) in the forward path of the loop (Fig. 6-3). To calculate the transfer function of the counter we note that the counter takes the input Nout and generates a time period equal to Nout×Tref. The PLL operates by forcing n  tn where n and tn are the zero crossings of the counter and DETF oscillator output respectively. Hence the transfer function of the counter must relate the counters input, Nout, to its output n. From Fig. 6-2 it is obvious that 3 = 2 + N3×Tref, for (Nout = N3). Therefore the counter integrates period (Nout×Tref) to generate time, n. As a result, in the z-domain transfer function of the counter is :

(z) N(z)

=

Tref 1 - z-1

(6-1)

6.1 Sigma Delta PLL Period Measurement System

90

Fig. 6-2: Waveforms for PLL.

The output of the linear model shown in Fig. 6-3 is:

( )Nout

(z)

=

 1

GL +G

L

  

t(z) 1- Tref

z -1

+

 1

1 +G

L

  

q(z)

(6-2)

where GL is the loop gain (GL = Kd AQ z-1F(z) C(z) ), q is the quantization noise introduced by the counter, Kd is the phase detector gain and AQ is the A/D converter (quantizer) gain.

6.1 Sigma Delta PLL Period Measurement System

91

Fig. 6-3: Linear model for the PLL. It can be shown (Fig. 6-2) that tn = tn-1 + tn. Where tn is the time between zero crossings tn and tn-1 and, t is equal to one half the sensors input period, T. Thus t(z) can be related to the input period, T(z), as shown in (6-3). Substituting (6-3) into (6-2) results in the output, N(z) with respect to the input period (6-4).

( )T(z) = 2× t(z) 1- z-1

(6-3)

N(z)

=

 1

GL +G

L

  

T(z) 2 Tref

+

 1

1 +G

L

  

q(z)

(6-4)

With sufficiently high loop gain in the signal band, the output of the PLL, N(z), is equal to the input period of Vout divided by 2×Tref. In addition the quantization noise in the signal band is attenuated by the loop gain.

6.1 Sigma Delta PLL Period Measurement System

92

6.1.2 High-Order Loop Architecture The loop filter architecture with weighted feedforward summation is particularly well
suited for PLL design. The general architecture of this filter is shown in Fig. 6-4.

Fig. 6-4: Weighted feedforward loop filter.
Since the filter uses feedforward paths to implement zeros necessary for loop stability, it avoids multiple feedback paths. In this architecture the only feedback path is through the counter. The counter converts a digital value, N, to an analog time, N×Tref. Hence it acts as a digital to analog (D/A) converter. If multiple feedback loops were used in the PLL, an additional D/A converter would be required to convert N into an analog voltage. The feedforward topology avoids this. However this topology does have one complication. The path, FF1, requires that the current pulse from the phase detector is multiplied by A and summed with the other feedforward paths (Fig. 6-4). While this is possible, it is inconvenient since the outputs of the other paths are voltages that remain

6.1 Sigma Delta PLL Period Measurement System

93

constant during the sampling period. One way to solve this problem is to remove the feedfoward path, FF1. The zero added to the transfer function by this path must be replaced to ensure loop stability. A lead compensator (LC) can be used to replace this zero [49]. The adjusted loop filter with the lead compensator is shown in Fig. 6-5.

Fig. 6-5: Loop filter with path FF1 removed and replaced a lead compensator.
It has been shown that lead compensation can also be employed in the feedback loop to obtain good loop stability [50]. Since the compensation is in the feedback loop it can be implemented digitally. Thus avoiding the necessity of implementing the block with discrete time analog circuitry. In addition, when digital compensation is used (i.e. D(z) = 2 ­ z-1), it does not affect the signal transfer function because D(z)  1 in the desired signal bandwidth, BW. The resulting PLL architecture is shown in Fig. 6-6 where G(z) determines the order of PLL. This filter architecture is similar to a typical PLL. In a typical PLL an integrator directly follows the phase detector. Then depending on the

6.1 Sigma Delta PLL Period Measurement System

94

order of the PLL, the output of the integrator is filtered further before it is fed back to the voltage-controlled oscillator.

Fig. 6-6: Sigma Delta PLL with digital lead compensator. The loop filter, G(z), in Fig. 6-6 can be designed to implement different order PLLs and hence noise transfer functions (NTFs). For instance, a 2nd order PLL can be designed by setting G(z) = 1. The topologies for G(z) that implement third and forth order PLLs are shown in Fig. 6-7.

6.1 Sigma Delta PLL Period Measurement System

95

Fig. 6-7: Topologies for G(z): a) 3rd order filter. b) 4th order filter. G(z) has two poles at DC. c) 4th order filter. G(z) has a pair of complex poles [51].
The linear model presented in this section can be used to analyze the stability of a PLL for a given loop filter with the techniques developed in [52]. However to evaluate the overall performance of the PLL a nonlinear model must be developed.
6.1.3 PLL A/D Size and Loop Order In chapter 4 the DETF oscillator was determined to have a resolution of 18 n in a
10kHz bandwidth. If the PLL contributes an equal amount of noise as the DETF oscillator the overall resolution of the strain measurement system will be approximately 26 nano-strain (n) which is well within the 100 n specification. Therefore 18 n is a suitable target resolution for the PLL prototype. Once a resolution goal is established, the required A/D size and loop order of the PLL can be determined.

6.1 Sigma Delta PLL Period Measurement System

96

The size of the A/D is related to the total range of the DETF oscillator period, Tin, and the size of the reference clock period. The approximate number of levels, Nlevels, required by the A/D converter is given by (6-5). The resulting bits required is, Nbits = log2(Nlevels).

N levels



Ceil 

Tmax - Tmin 2 Tref

  

+

3 

(6-5)

Tmax

=

1

fr

-

fr 

max

(6-6)

Tmin

=

fr

1 + fr


max

(6-7)

where max is maximum input strain. For the strain sensor in this work max = ± 1000 µ, fr = 217 kHz, and fr/ = 39 Hz/µ. A plot of (6-5) is shown in Fig. 6-8.

Fig. 6-8: A/D converter size versus reference frequency.

6.1 Sigma Delta PLL Period Measurement System

97

The quantization error made by the PLL is proportional to the period Tref. As quantization noise grows the order of the PLL must increase to obtain the same resolution in a given bandwidth. As a result, A/D size (Nbits) decreases with increasing PLL loop order for a given resolution. A nonlinear model of the PLL can be used to determine this relationship (Fig. 6-9).

Fig. 6-9: Nonlinear model of the SDPLL.
The model shown in Fig. 6-9 includes the actual nonlinear model for the A/D converter instead of the linear model (Fig. 6-6). The model (Fig. 6-9) was simulated using MatlabTM resulting in Fig. 6-10 with Kd×KI = fref/AQ.
Note the A/D converter gain, AQ, is approximately equal to 1/LSB, where the LSB is the quantization step size of the converter. The values of G(z) used in the simulation for the third and fourth order PLL loops were:

G(z)

3rd

=

0.898

1  

- 0.795 z 1 - z-1

-1

  

(6-8)

6.1 Sigma Delta PLL Period Measurement System

G(z) 4th

=

0.541

1 1

- -

1.82 1.97

z z

-1 -1

+ 0.906 z-2 + 0.996 z-2

  

98 (6-9)

Fig. 6-10: Simulated PLL resolution as a function of order and Nbits for the nonlinear model.
From Fig. 6-10 it can be seen that the 4th order SDPLL achieves the best resolution for a given A/D size (Nbits). Also the 4th order sigma delta achieves an effective resolution of 22 n with an A/D converter size of only 4 bits. This is very close to the target resolution for the PLL discussed earlier. Hence this was the order and A/D size used for the PLL prototype. A plot of the noise transfer function (NTF) of the PLL with G(z)

6.2 Prototype Sigma Delta PLL

99

given by (6-9) for both the linear (Fig. 6-6) and non-linear model (Fig. 6-9) is shown in Fig. 6-11.

6.2 Prototype Sigma Delta PLL
The prototype PLL used in this work was implemented on a PC board. The control logic, counter, phase detector, and digital lead compensation were implemented using and field programmable logic array (FPGA) (Fig. 6-12). The loop filter in this prototype was designed with continuous-time (C-T) circuitry. Finally a 4 bit flash A/D converter was used to quantize the output of the analog filter.

Fig. 6-11: Noise transfer function for the 4th order PLL.

6.2 Prototype Sigma Delta PLL

100

6.2.1 FPGA design

6.2.1.1 Timing Control Logic One of the most important parts of the design is the timing control (Fig. 6-12) for the
PLL. The timing control logic must generate control signals that determine when the A/D samples the output of the loop filter and when the FPGA latches the A/D output.

Fig. 6-12: PC Board implementation of resonant sensor measurement system.
For this prototype an analog devices AD75482AST A/D converter was used [53]. Fig. 6-13 shows the timing control signals generated by the FPGA and the A/D. From Fig. 6-13 it can be seen that the A/D converter must convert the output of the loop filter, VLF, at a time greater than max(tn, n). To do so, the timing control circuitry generates a signal, CONVSTB, which starts an analog to digital conversion on its falling edge. The logic

6.2 Prototype Sigma Delta PLL

101

circuit used to generate CONVSTB is shown in Fig. 6-14. Muller c-elements [54] are used to create an output signal that switches after its last input signal has switched (Vout or Cout). The rising edge of the c-element output is then used to generate a pulse. This function is performed for both edges of the input signals (rising and falling), thereby generating a pulse that occurs after the last zero crossing (max(tn, n)) of the input signals.

Fig. 6-13: Timing control signals.
In addition, the CONVSTB is delayed by, td, to ensure that the output of the integrator has settled before the analog to digital conversion is performed. The pulse width and delay, td, of CONVSTB are equal to multiples of the reference clock period. The BUSYB signal is a handshake signal generated by the A/D. The rising edge of the BUSYB signal indicates when the conversion is finished. Finally the rising edge of INTCLKB is used to

6.2 Prototype Sigma Delta PLL

102

latch the data from the converter and to provide a clock for the digital compensator. Finally, note the total conversion time, tc, must be limited to a fraction of the minimum expected time between tn and tn+1.

Fig. 6-14: Logic circuit used to generate CONVSTB.
6.2.1.2 Phase Detector The phase detector used in the FPGA design is shown in Fig. 6-15. It uses two three
state phase detectors [55]. One phase detector is used for detecting the difference between the zero crossings of Vout, and Cout on their positive edge transitions and the other for negative edge transitions. The output of the phase detectors control tri-state buffers which drive the first stage of the loop filter (integrator). The output pulse of the phase detector has an area of An (Fig. 6-2). For this phase detector, An is given by (6-10).

6.2 Prototype Sigma Delta PLL

103

An

=

Vdd 2R

(t n

- n )

(6-10)

where Vdd is the tri-state buffer power supply and R is the "on" resistance of the buffers. The integrator is assumed to have a DC bias of Vdd/2 at its input. Hence the output current of the tri-state buffers has three states: 0 and ±Vdd/2R. Therefore the gain of the phase detector, Kd, is Vdd/2R.

Fig. 6-15: PLL prototype phase detector.

6.2 Prototype Sigma Delta PLL

104

6.2.1.3 Counter The counter used in the prototype is shown in Fig. 6-16. It consists of a reset-able
counter and a digital comparator. The counters input is K+M, i.e. the output of the digital compensator (K) plus a constant offset (M). When the counter reaches a value greater than its input, the digital comparator resets the counter and toggles the output Cout.

Fig. 6-16: Counter block diagram.

The relationship between the input of the counter and period of Cout is given by (6-11).

T^ n 2

=

T ref 2

(K n

+ M + 1)

(6-11)

6.2.2 Continuous-Time Filter Design This section describes the design of the loop filter. It was shown the 4th order PLL
with the transfer function given by (6-9) meets the resolution requirements for the resonant strain sensor. The filter in this prototype is a continuous-time (C-T) filter, while

6.2 Prototype Sigma Delta PLL

105

the filter developed in [56] is a discrete-time (D-T) filter. As a result discrete-time filter, G(z), must be converted to an equivalent continuous-time filter, G(s). Two properties of the PLL are used to perform this conversion.
First, the C-T integrator in the loop filter is functionally equivalent (Fig. 6-17a) to a discrete-time integrator followed by a zero order hold (ZOH). The outputs of the two integrators differ only during the time when the difference, tn-n, is sampled. Therefore the C-T integrator can be replaced with a D-T integrator and a ZOH (Fig. 6-17b).

Fig. 6-17: C-T integrator and D-T equivalent.

6.2 Prototype Sigma Delta PLL

106

Second, the output of G(s) is sampled and held by the A/D converter. As a result, the section label "Equivalent Digital Filter" in Fig. 6-18a can be converted to a equivalent discrete time filter G(z) using state space methods detailed in [57].

Fig. 6-18:a) Loop filter with C-T filter G(s). b) Loop filter with equivalent D-T time filter G(z).
The MatlabTM functions c2d (continuous to discrete) and d2c (discrete to continuous) implement the method described in [57] and were used to perform the conversion. Hence, given (6-9), the equivalent G(s) can be obtained by using d2c with the ZOH conversion method (6-12).

G(s) 4th

=

0.541

 

s

2



+ 5.48 ×104 s + 1.67 ×1010 s2 + 1934 s + 4.33×109

  

(6-12)

6.2 Prototype Sigma Delta PLL

107

Fig. 6-19: Continuous-time filter block diagram.

The transfer function in (6-12) can be implemented using the block diagram shown in Fig. 6-19. The parameters (G1, G2, GT, and FF1) of the filter in Fig. 6-19 are obtained by setting FF2 and  to ­1, and calculating its transfer function, Gc(s). G1, G2, GT and FF1 are then determined by equating the coefficients of Gc(s) to the coefficients in (6-12). The resulting parameters are given in Table 6-1.

Table 6-1: Filter parameters for Gc(s)

Filter Parameter
 FF1 FF2 G1 G2 p GT

Value
-1 0.3642
-1 -1.9249×104 Hz -2.2497×104 Hz
966.7595 1.4865

6.2 Prototype Sigma Delta PLL

108

In section 6.1.3, G(z) was designed assuming Kd×KI = fref/AQ. Hence the integrator gain for the filter is given by (6-13). The values of all other parameter for the prototypes loop filter are given in Table 6-2.

KI

=

1 Cint

=

fref 2 R AQ Vdd

(6-13)

Table 6-2: Other filter parameters for G(s).

Parameter fref
R

AQ

=

2Nbits -1 2VFS (1 - 2-(Nbits +1) )

Vdd Nbits

VFS

Cint = 1/ KI

Description Reference Clock Phase Detector Resistance (measured FPGA tri-state driver resistance)
A/D converter Gain
Phase Detector Supply voltage # of A/D bits
Full scale voltage of A/D. A/D input range = 0 V to 2VFS Calculated integrator capacitance

Value 16 MHz
180 
6.1935 1/V
3.3 V 4
1.25 V
3.55 nF

Finally the circuit that was used to implement the loop filter is shown in Fig. 6-20. Note that the inversion at the output of the filter can be removed by changing the polarity of the phase detector. This is accomplished by reversing the phase detector inputs. For the prototype designed in this work, the last inverting stage was not removed but was used as part of the level shifting necessary to place the filters DC output in the middle of the A/D input range.

6.2 Prototype Sigma Delta PLL

109

Fig. 6-20: Circuit implementation of the C-T loop filter. The PC board implementation of the full PLL from (Fig. 6-12) is shown in Fig. 6-21. The full PLL consists of two boards, one for the FPGA and one containing the analog filter G(s), and the A/D. The FPGA board used was a Xilinx Virtex ­E PQ240-110 development board [58]. A 12-bit A/D (AD7482) was used so that the number of bits used by the PLL was programmable through reconfiguration of the FPGA. For the results presented in the following sections the prototype used the four most significant bits of the 12-bit A/D output.

6.3 Measured Results

110

Fig. 6-21: PC Board of 4th order PLL prototype. 6.3 Measured Results 6.3.1 Experimental Setup
The experimental setup used for testing the prototype PLL is shown in Fig. 6-22.

Fig. 6-22: Experimental Setup.

6.3 Measured Results

111

In the experimental setup the PLL could be used to measure the output of the DETF oscillator or the output of the signal generator #1. The output of signal generator #1 was used to measure the noise transfer function (NTF) of the PLL (Fig. 6-23). It was observed that the measured NTF did not match the simulated NTF. Instead of having the expected slope of 40 dB per decade, the measured NTF had a slope of 20 dB per decade (Fig. 6-23). Further experiments revealed that a mismatch in the phase detector (PD) was the source of this discrepancy. The PD was implemented using standard FPGA tri-state output drivers and the mismatch in the driver's pull-up and pull-down strength was measured to be 2 percent. Once the mismatch was incorporated into the simulation model the simulated and measured results were in good agreement.

Fig. 6-23: Measured and simulated noise transfer functions for the prototype PLL.

6.3 Measured Results

112

The output of the DETF oscillator with zero input strain was then measured with the PLL and compared to the simulation model. The simulation model incorporated the PD mismatch and the measured phase noise of oscillator (see chapt. 4). The simulation model predicted a 29 n resolution in 10 kHz bandwidth. The actual measurement achieved a resolution of 33 n in 10 kHz (Fig. 6-24). The measured noise floor is approximately 60 p/Hz or 12 fm/Hz up to 1 kHz.
The measured resolution, due to the resonant sensor oscillator only was 18n. Therefore the PLL contributes approximately 24n to the overall strain measurement system resolution.

Fig. 6-24: Measured and simulated sensor noise floor.

6.4 Discussion

113

Finally, the measurement system was characterized by applying strain at varying frequencies using the strain actuator. Using this method the to operation up to 10 kHz bandwidth was verified (Fig. 6-25).

6.4 Discussion
A complete resonant strain measurement system that obtains 33 n in a 10 kHz bandwidth has been developed. A novel 4th order PLL was used to demodulate and digitize the output of the resonant sensor oscillator reported in [2]. In addition this system demonstrates that using a PLL for resonant sensing has the potential to achieve high measurement resolution, while replacing the PLL and A/D converter with a signal block, thus reducing the complexity of the frequency demodulation electronics.

Fig. 6-25: Measured strain applied varying frequencies.

114
CHAPTER 7:
CONCLUSIONS AND FUTURE WORK
7.1 Summary
In the past attempts to improve the resolution of MEMS double-ended tuning fork (DETF) resonant sensors have concentrated on reducing the resonator phase noise. This was based on the hypothesis that making the resonator Q as large as possible, phase noise can be made arbitrarily small. If true, this would imply that there is no resolution limit for MEMS resonant sensors. However, further analysis of sensor phase noise reveals a more complex relationship between phase noise, resonator drive level and Q. In fact this relationship shows that increasing Q increases phase noise in many cases. In this thesis we present a more accurate model for resonator phase noise that accounts for both Q and drive level.
The main results of this analysis show that phase noise does not improve with Q in all cases. In fact "far from the carrier noise" phase noise, Lfar, gets worse with increasing Q, while "close to the carrier noise" phase noise, Lnear, improves. This general result is derived in chapter 3 and repeated here (7-1). Note, xb is the peak deflection of the resonator.

7.1 Summary

n



Q {x 2b

+

1x 2b14Q422f4fom432

Lfar Lnear

115 (7-1)

Resolution is proportional to the integral of the sensors phase noise over the bandwidth of interest. Therefore, it can be shown, from (7-1), that there is a Q for which resolution is optimized over that bandwidth. This optimum Q was shown to be approximately equal to (7-2) (see chapter 3).

Qopt =

3 fr 2 BW

(7-2)

where fr is the resonant frequency of the sensor and BW is the sensor bandwidth. Hence as sensor bandwidth increases the Q at which optimum resolution is attained decreases. This result represents a radical shift in how Q is selected for resonant sensor design.
Consider a sensor that has a resonant frequency of 200 kHz and a required bandwidth of 1 kHz. The optimum Q for this sensor would only be ~ 173! A resonant strain sensor oscillator was developed in this work (chapter 4) that demonstrates the improvement in resolution and phase noise (Lfar) when operating close to the optimum Q. It obtained a phase noise floor (Lfar) that was ~10000 times smaller than previous resonant sensors with similar resonant frequencies but with Q's greater than 10000.
One of the challenges for operation at low Q is the presence of parasitic feed-through capacitance, Cft. Cft adds an undesirable current to the total output current of the resonant sensor and very small values of this capacitance can completely swamp out the DETF

7.1 Summary

116

output. There is a direct relationship between Q and the value of Cft that will make oscillation, and hence detection of the resonator output, impossible. This relationship derived in chapter 4 is repeated here (7-3).

max(Cft )

=

Q 2

Cx

=

1 4fr Rx

(7-3)

Q min

=

2

Cft Cx

(7-4)

Here Cx and Rx are the motional capacitance and resistance in the resonator linear model (see chapter 2). For robust oscillator design we require Cft  max(Cft)/5 or Q  5× Qmin. To meet this condition at atmospheric pressure with the sensor developed in this work (Q=370), Cft would have to be less than 4fF! As a result, the typical solution is to increase Q until Q >> 5×Qmin by operating the sensor in a vacuum. However, by increasing Q to ensure oscillation, resolution is adversely affected.
The goal of this work was to operate at the optimum Q of the sensor to obtain the predicted improvement in phase noise and thus resolution. However in many cases the optimum Q (Qopt) can be much lower than the Q required to overcome the feed-through capacitance. Therefore, Cft can become the limiting factor with respect to phase noise and resolution. In chapter 4, a time variant oscillator, or square wave drive oscillator (SWO), was introduced which alleviates this problem by allowing oscillation of low Q resonators in the presence of large feed-through capacitance. This work demonstrated oscillation of a DETF resonant sensor with a Q = 370 (closer to its optimum Q of 17), and with a feedthrough capacitance of ~70fF using the SWO oscillator. This resonant sensor oscillator

7.1 Summary

117

achieved the best phase noise floor to date for resonant sensors in this resonant frequency range.
Finally a 4th order sigma-delta phase locked loop (PLL) frequency measurement system was developed (chapters 5 and 6) to measure and digitize the output frequency of the SWO oscillator mentioned above. This PLL replaced the typical method used to measure the output of a resonant sensor oscillator. The old method employed a two-step approach where a phase locked-loop (PLL) is used to demodulate the oscillator output, followed by a digitization step done by an A/D converter. One of the main problems with this method was that the voltage-controlled oscillators (VCOs) used in the PLL feedback loop adversely affects the performance of the overall system. In addition, this method does not take advantage of the inherent oversampling available with resonant sensors (chapter 5). As a result this method will require a more complex A/D converter than the PLL system. The PLL combines the two steps (demodulation and digitization) into a single step which simplifies the design of the measurement system. In addition it takes advantage of oversampling allowing simplification of the A/D converter design. Finally, the PLL uses a digital counter instead of the VCO. The counter accuracy is dependent on the frequency reference used to drive it. With a high accuracy reference, such as an external crystal oscillator, the variation in the system due to the counter is much lower than the variation introduced by a VCO. The PLL developed in this work was the first 4th order PLL published. In addition a novel method was developed to double the sample rate of the PLL by sampling on both edges of the input signal.

7.2 Future Directions

118

The resonant sensor measurement system with a SWO oscillator and a PLL was implemented with surface mount components on a PC board to demonstrate the feasibility of these concepts. With this SWO oscillator, we obtained a phase noise floor of ­120 dBc/Hz. This is the best noise performance obtained to date for resonant sensors in this resonant frequency range. This confirmed the conclusions from the model that predicted an improved phase noise floor as the Q is reduced. The 4th order PLL implementation achieved a 1Hz frequency resolution (21 ps period resolution) in a 10kHz bandwidth. This overall measurement system was used to implement a prototype strain sensor and achieved a 33 n resolution in 10kHz.

7.2 Future Directions

7.2.1 Design of Better MEMS Resonators (Phase Noise) Interestingly, one of the ways to improve the performance of the sensor presented in
this work could be improved would be to use a sinusoidal oscillator instead of the SWO oscillator. This is because the nonlinearity of the SWO oscillator causes the phase noise to be larger than the phase noise of a linear or sinusoidal-output oscillator. Making this improvement with the DETF resonant sensor presented in this work was impossible because Cft had to be less than 4fF to use a linear oscillator. However if the sensor itself can be improved, this limitation could be removed. For instance, the sensor used in this work had gaps ~3µm. If the gaps were decreased than by a factor of  then the minimum Q required for oscillation would decrease by a factor of 2 or the value of Cft at which oscillation would become impossible for sinusoidal-output oscillators would increase by

7.2 Future Directions

119

2. Hence a sinusoidal oscillator could be used and the phase noise of the sensor could be improved.
In addition to decreasing the gaps to allow for oscillation with large Cft, feed-through capacitance can also be reduced by implementing the sensor with integrated electronics and a differential sensor topology! Finally improving the mechanical linearity of the DETF resonator would improve the long-term stability of the resonant sensor oscillator.

7.2.2 Temperature Compensation The strain sensor implemented in this work exhibited a temperature sensitivity of
approximately 7 Hz/ºC. As a result a 1 degree (Celsius) change in temperature will result in an apparent strain of 0.18 microstrain which is larger than the resolution goal for the sensor is 0.1 microstrain. Therefore it is obvious that some sort of temperature compensation will be required to obtain the resolution goal. In the work presented here temperature compensation for the resonant strain sensor was not employed. However one of the compensation schemes outlined in chapter 2 could be pursued in the future to improve sensor performance.

7.2.3 Sigma Delta Phase Locked Loop: Other Applications The sigma delta phase locked loop has applications in other areas. One possible
application is a low power digital FM radio. Presently digital radios are implemented using the architecture shown in Fig. 7-1. This type of FM radio operates by shifting one of the FM radio channels in the band (88 MHz to 108MHz) to an intermediate frequency (IF). Typically the IF frequency is 10.7MHz, but can be lower. A ceramic IF filter with a

7.2 Future Directions

120

10.7MHz center frequency and a 200kHz bandwidth is used to select the desired channel while attenuating all other channels in the FM band.

Fig. 7-1: State of the art Digital AM/FM radio architecture.
The output of the filter is then digitized with a band pass sigma delta A/D converter. Finally the FM channel is demodulated digitally. One of the advantages of this architecture is that both FM and AM radio can be demodulated using the same front-end receiver architecture. In addition there is some evidence that the ceramic IF filter may not be needed as the filter in the band pass sigma delta can be used to perform its function [59]. While this type of architecture provides flexibility it requires a complicated band pass sigma delta A/D converter to convert the FM radio band [59, 60, 61]. Typically the A/D requires a bandwidth in excess of 200kHz, and an SNR greater than 70dB to achieve a SNR around 66dB [53] at the output of the demodulator. This is because digital demodulation introduces quantization noise that further degrades the overall SNR [62]. In addition these converters [59, 60, 61] have sample rates in the range of 20-80MHz depending on the IF frequency used. An alternative to this architecture is shown in Fig. 7-2. Here a PLL is used to demodulate and digitize the FM radio channel. This method

7.2 Future Directions

121

cannot implement AM demodulation, unlike the previously described method. However, it is possible to achieve similar or better performance then reported in [59, 60, 61] for FM demodulation and digitization with sample rates as low as 1MHz.

Fig. 7-2: Low power PLL FM radio.
The main reason such a low sample rate can be used, is because the PLL only needs to digitize the signal bandwidth, which is approximately 20kHz for FM radio. The method shown in Fig. 7-1 must digitize the entire FM modulated radio channel bandwidth, which is approximately 190 kHz, centered at the IF frequency, assuming a 75 kHz frequency deviation [41]. Hence the A/D converter must operate at much higher sample rates. To demonstrate the feasibility of the PLL method, the PC board prototype was tested as an FM demodulator in the configuration shown in Fig. 7-3. Nn FM modulated 10.7MHz signal was fed into the counter of the PLL and the sample rate was 2×217 kHz or 434 kHz. In this experiment the PLL achieved better than 94dB SNR in 10 kHz (Fig. 7-4).

7.2 Future Directions

122

Fig. 7-3: Test setup for a FM radio using PLL prototype.

Fig. 7-4: Measured results: demodulated 10.7MHz IF radio signal for frequency deviations of 200Hz and 75kHz at a modulation frequency of 1kHz.

7.2 Future Directions

123

Assuming the bandwidth is increased to 20kHz, and the oversampling ratio remains the same, this architecture should achieve a similar SNR in 20kHz at a sample rate of 868 kHz. This is a reduction of 20 to 80 times the sample rate used in [59, 60, 61]! Therefore a very low power digital FM radio could be achieved using the PLL architecture shown in Fig. 7-2.
Finally this architecture (Fig. 7-3) could be used with high frequency resonant sensors. In this case, the resonant sensor would drive the input of the counter (Fig. 7-5).

Fig. 7-5: SDPLL architecture for measurement of high frequency resonant sensors.

124
APPENDIX A: PHASE NOISE DUE TO 3RD ORDER RESONATOR
NONLINEARITIES
Resonator nonlinearities can result in significant 1/f3 phase noise. This appendix derives an analytical model for this noise. Consider the oscillator in Fig. A.1. For this analysis we assume all 1/f noise is referred to the input of the resonator (nd).

Fig. A.1: Schematic of a C/V converter with parasitics.

Assuming we have an electro-statically driven resonator with equal drive and sense capacitances the steady state driving force, Fdrive, applied to the resonator is:

(( ) )Fdrive

=

-

1 2

C x

Vout + v1 f - Vdc

- Vd2c

(A-1)

Appendix A

125

Vout = vd cos(ot)

(A-2)

Substituting (A-2) into (A-1) and taking terms only at o the driving force reduce to:

( )Fdrive

=

C x

Vdc - v1 f

vd cos(ot) = Fd cos(ot)

(A-3)

Note that the electrostatic nonlinearity has up-converted the 1/f noise to the resonant frequency, resulting in a peak driving force that is amplitude modulated by the 1/f noise. As a result the peak deflection, xb, of the resonator is amplitude modulated by 1/f noise. It can be shown that the peak deflection of a resonator as function of the peak driving force, Fd is:

xb Fd

=

Q k m1

(A-4)

It was shown in chapter 2 that the resonant frequency is a function of the peak amplitude when a 3rd order mechanical or electrical nonlinearity is present. As a result the frequency noise due to the 1/f modulation can be found by noting:

f 2

=



3 8

fo

k3 k m1

x

2 b

2

(A-5)

Plugging (A-3) into (A-5) and taking only the terms that are linear with respect to the 1/f noise we get:

Note that:

f 2

=



9 16

f o2

k

2 3

k

6 m1

Q

4Vd2c

v

4 d

v12 f

=



9 16

f

2 o

k

2 3

k

2 m1

x

4 b

Vd2c

v12 f

(A-6)

Appendix A

126

v12 f

=

Kf fm

And phase noise is related to frequency noise by:

(A-7)

S (fm )

=

f 2

f

2 m

=



9 16

f o2

k

2 3

k

6 m1

Q

4Vd2c

v

4 d



Kf

f

3 m

=



9 16

f o2

k

2 3

k

2 m1

x

4 b

Vd2c



Kf

f

3 m

(A-8)

To confirm this model, simulations were done with MatlabTM. The results of a MatlabTM simulation modeling the DETF resonator from chapter 4 are shown in Fig. A.1. Only 1/f noise was present in the oscillator simulation.

Fig. A.2: 1/f3 phase noise due to resonator nonlinearities.

Appendix A The parameters for the simulation were:
Table A-1: Simulation Parameters.

127

Symbol Value
vd 4.7 V Vdc 84 V fo 217 kHz Q 270 Kf 6.49×10-12 V2 km1 658.3 N/m k3 7.2×1012 N/m3

It was observed that as the drive voltage was increased, the phase noise displayed a region of 1/f4 or 1/f5 phase noise that occurred after the 3dB bandwidth (fo/2Q) of the oscillator loop. Our hypothesis for this behavior [63] was that this could be a result of the peak deflection being a frequency dependent function of the peak force. In fact it is related to the peak deflection by [1, 26]:

xb Fd

=

Q k m1

1 s 2Q + 1

o

(A-9)

If this is taken into account, the phase noise due to the 3rd order nonlinearity is can be approximated by the empirical equation below:

Appendix A

128

22

S (fm )





9 16

f

2 o

k

2 3

k

6 m1

Q 4 Vd2c v d4



1

2Q fo

fm

+1

Kf

f

3 m

=



9 16

f

2 o

k

2 3

k

2 m1

x

4 b

Vd2c



1

2Q fo

fm

+

1

Kf

f

3 m

(A-10)

Figures A-3 and A-4 show simulations where the drive voltage was increased to 9.1V and 28.8V respectively while the other parameters remain unchanged (table A-1). Note the presence of the 1/f5 phase noise.

Fig. A.3: Phase noise: vd = 10V. Increased drive level displays 1/f5 phase noise.
A zero is also added into the phase noise transfer function by "VGA" feedback loop used to control the peak deflection of the oscillator [63] indicated in Fig. A.3. Interestingly, the position of the zero is dependent peak drive voltage, vd. For instance, the zero moves to higher in frequency (Fig. A.4) as the drive voltage is increased from 10V to 30V. Because of this zero, it is difficult to verify the presence of 1/f5 phase noise in Fig. A.3.

Appendix A

129

Fig. A.4: Phase noise: vd = 30V. The above analysis shows that 3rd order nonlinearity does in fact cause 1/f3 phase noise. In addition it can cause higher order noise phase noise as well. Therefore nonlinearities should be minimized to reduce this type of phase noise. Finally, equations (A-9) and (A-10) approximate the phase noise in due to these nonlinearities however more research needs to be focused on developing better analytical models for nonlinear mechanisms in MEMS resonators. This is particularly evident from (Fig. A.3 and Fig. A.4) where the simulation results do not match the predicted results from equation (A10). In fact it seems that the phase noise may be exhibiting 1/f4 noise, which is not predicted by the model. However the equations do provide an upper bound for the noise.

130
APPENDIX B: SWO OSCILLATOR SCHEMATIC AND PC BOARD
Fig. B.1 PC Board SWO Oscillator. The comparator for the SWO (Fig. B.2) is implemented with the amplifiers A1, A2, and A3. A3 generates an inverted signal, DRIVEB, which can be used to drive a capacitor, Cneg, in parallel with the DETF. This provides a method to cancel Cft by adjusting the values of RP1 and RP2. Finally RP3 can be used to tune the frequency at which the phase shift of the circuit is zero. This is equivalent to adjusting the SWO oscillator frequency when the resonator bias is zero, to a value larger than the resonators frequency. Note that the schematic in Fig. B.2 is only a partial schematic for the PC board shown above but is sufficient to build a similar board.

Appendix B

131

Fig. B.2: Schematic of SWO PC Board Oscillator.

BIBLIOGRAPHY

132

[1] T. R. Albrecht, P. Grutter, D. Horne, and D. Rugar, "Frequency modulation and detection using high-Q cantilevers for enhanced force microsope sensitivity," Journal of Applied Physics, vol. 69, no.2, pp. 668-673, 1991.
[2] K. E. Wojciechowski, B. E. Boser, and A. P. Pisano, "A MEMS resonant strain sensor operated in air," Technical Digest, 17th IEEE International Conference on Micro Electro Mechanical Systems, pp. 841-845, 2004.
[3] N. Barbour and G. Schmidt, "Inertial sensor technology trends," Sensors Journal, IEEE, vol. 1, no.4, pp. 332-339, 2001.
[4] R. T. Howe, "Resonant microsensors," Technical Digest, Fourth International Conference on Solid State Sensors and Actuators A (Physical), Tokyo, Japan, pp. 843-848, 1987.
[5] A. A. Seshia, M. Palaniapan, T. A. Roessig, R. T. Howe, R. W. Gooch, T. R. Schimert, and S. Montague, "A vacuum packaged surface micromachined resonant accelerometer," IEEE Journal of Microelectromechanical Systems, vol. 11, no.6, pp. 784-793, 2002.
[6] C. Hagleitner, D. Lange, A. Hierlemann, O. Brand, and H. Baltes, "CMOS singlechip gas detection system comprising capacitive, calorimetric and mass-sensitive microsensors," IEEE Journal of Solid-State Circuits, vol. 37, no.12, pp. 1867-1878, 2002.
[7] C. Burrer, J. Esteve, and E. Lora-Tamayo, "Resonant silicon accelerometers in bulk micromachining technology-an approach," IEEE Journal of Microelectromechanical Systems, vol. 5, no.2, pp. 122-130, 1996.
[8] L. D. Clayton and E. P. EerNisse, "Quartz thickness-shear mode pressure sensor design for enhanced sensitivity," IEEE Transactions on Ultrasonics, Ferroelectrics and Frequency Control, vol. 45, no.5, pp. 1196-1203, 1998.
[9] Y. Ahn, "Resonant Microbeam Electronic Oscillators for Strain Sensing," P.h.D. Thesis, Department of Electrical and Computer Engineering, University of Wisconson, Madison, 1999, pp. 8-22.
[10] T. A. Roessig, "Integrated MEMS tuning fork oscillators for sensor applications," P.h.D. Thesis, Department of Mechanical Engineering, University of California, Berkeley, 1998.

Bibliography

133

[11] J. J. Sniegowski, H. Guckel, and T. R. Christenson, "Performance characteristics of second generation polysilicon resonating beam force transducers," Technical Digest, 4th IEEE Solid-State Sensor and Actuator Workshop, pp. 9-12, 1990.
[12] H.-H. Over, O. Knotek, and E. Lugscheider, "Elastic properties of silicon single crystals in dependence on temperature and dislocation density," Zeitschrift fur Metallkunde, vol. 73, no.9, pp. 552-557, 1982.
[13] T. A. Roessig, "Integrated MEMS tuning fork oscillators for sensor applications," P.h.D. Thesis, Department of Mechanical Engineering, University of California, Berkeley, 1998, pp. 8-9, 103-105.
[14] A. A. Seshia, "Integrated micomechanical resonant sensors for inertial measurement systems," P.h.D. Thesis, Department of Electrical Engineering and Computer Science, University of California, Berkeley, 2002, pp. 91.
[15] W.-T. Hsu, J. R. Clark, and C. T.-C. Nguyen, "Mechanically temperaturecompensated flexural-mode micromechanical resonators," Technical Digest, International Electron Devices Meeting, pp. 399-402, 2000.
[16] C. T.-C. Nguyen, "Micromechanical signal processors," Department of Electrical Enginnering and Computer Science, University of California, Berkeley, 1994, pp. 37-38.
[17] M. Hopcroft, R. Melamud, R. N. Candler, W.-T. Park, B. Kim, G. Yamma, A. Partridge, M. Lutz, and T. W. Kenny, "Active temperature compensation for micromachined resonators," Technical Digest, Solid-State Sensor and Actuator Workshop, Hilton Head Island, S. C., pp. 389-438, 2004.
[18] J. I. Seeger, X. Jiang, M. Kraft, and B. E. Boser, "Sense finger dynamics in a Sigma Delta force-feedback gyroscope," Technical Digest, Solid-State Sensor and Actuator Workshop, Hilton Head, SC, pp. 296-299, 2000.
[19] W. C. Tang, "Electrostatic comb drive for resonant sensor and actuactor applications," P.h.D. Thesis, Department of Electrical Engineering and Computer Science, University of California, Berkeley, 1990.
[20] T. A. Roessig, R. T. Howe, and A. P. Pisano, "Nonlinear mixing in surfacemicromachined tuning fork oscillators," Technical Digest, IEEE Frequency Control Symposium, pp. 778-782, 1997.
[21] R. Navid, J. R. Clark, M. Demirci, and C. T.-C. Nguyen, "Third-order intermodulation distortion in capacitively-driven CC-beam micromechanical resonators," Technical Digest, The 14th IEEE International Conference on Micro Electro Mechanical Systems, pp. 228-231, 2001.

Bibliography

134

[22] C. T.-C. Nguyen, "Micromechanical signal processors," Department of Electrical Enginnering and Computer Science, University of California, Berkeley, 1994, pp. 53-55.
[23] M. Seth, "The design of low phase noise MEMS oscillators for frequency references," M.S. Thesis, Department of Electrical Engineering and Computer Science, University of California, Berkeley, 2004.
[24] W. C. Young and R. G. Budynas, Roark's formulas for stress and strain, 7th ed. New York: McGraw-Hill, pp. 196-197, 2002.
[25] T. A. Roessig, "Integrated MEMS tuning fork oscillators for sensor applications," P.h.D. Thesis, Department of Mechanical Engineering, University of California, Berkeley, 1998, pp. 58-60.
[26] F. W. Sears, M. W. Zemansky, and H. D. Young, University physics, 7th ed. Reading, Mass.: Addison-Wesley Publishing Company Inc., pp. 778-779, 1987.
[27] D. B. Leeson, "A simple model of feedback oscillator noise spectrum," Proc. IEEE, vol. 54, pp. 329-330, 1966.
[28] W. P. Robins, Phase noise in signal sources. London: Peter Peregrinus Ltd., 1982.
[29] A. Hajimiri and T. H. Lee, The design of low noise oscillators. Boston: Kluwer Academic Publishers, 1999.
[30] H. A. C. Tilmans, M. Elwenspoek, and J. H. J. Fluitman, "Micro resonant force gauges," Sensors & Actuators A-Physical, vol. A30, no.1-2, pp. 35-53, 1992.
[31] C. Gui, R. Legtenberg, H. A. C. Tilmans, J. H. J. Fluitman, and M. Elwenspoek, "Nonlinearity and hysteresis of resonant strain gauges," IEEE Journal of Microelectromechanical Systems, vol. 7, no.1, pp. 122-127, 1998.
[32] V. Kaajakari, T. Mattila, A. Oja, and H. Seppa, "Nonlinear limits for single-crystal silicon microresonators," IEEE Journal of Microelectromechanical Systems, vol. 13, no.5, pp. 715-724, 2004.
[33] V. Kaajakari, T. Mattila, J. Kiihamaki, H. Kattelus, A. Oja, and H. Seppa, "Nonlinearities in single-crystal silicon micromechanical resonators," Technical Digest, 12th International Conference on Solid-State Sensors and Actuators, vol. 2, pp. 1574-1577, 2003.
[34] L. D. Landau and E. M. Lifshitz, Mechanics, vol. 1, 3rd ed. New York: Pergamon Press, pp. 86-90, 1976.

Bibliography

135

[35] S. Lee and C. T.-C. Nguyen, "Phase noise amplitude dependence in self-limiting wine-glass disk oscillators," Technical Digest, Solid-State Sensor and Actuator Workshop, Hilton Head Island, S. C., pp. 33-36, 2004.
[36] M. Offenberg, M. Illing, M. Schöfthaler, R. Schellin, and D. Ullmann, "Sensor portfolio fo automotive applications based on surface micro-machining with thick polysilicon," Sensor 99 Proceedings II P1.10, pp. 293, 1999.
[37] T. A. Roessig, R. T. Howe, A. P. Pisano, and J. H. Smith, "Surface-micromachined resonant accelerometer," Technical Digest, 9th International Conference on SolidState Sensors and Actuators, Chicago, IL, vol. 2, pp. 859-862, 1997.
[38] J. R. Westra, C. J. M. Verhoeven, and A. H. M. van Roermund, "Resonance-mode selection and crosstalk elimination using resonator-synchronised relaxation oscillators," Technical Digest, 24th European Solid-State Circuits Conference, pp. 88-91, 1998.
[39] C. T.-C. Nguyen and R. T. Howe, "An integrated CMOS micromechanical resonator high-Q oscillator," IEEE Journal of Solid-State Circuits, vol. 34, no.4, pp. 440-455, 1999.
[40] www.freescale.com, "See: Symphony digital radio chip set."
[41] H. Stark, F. B. Tuteur, and J. B. Anserson, Modern electical communications analog, digital, and optical systems, vol. 1, 2nd ed. Englewood Cliffs, NJ: Prentice Hall, pp. 320-321, 1988.
[42] J. Park, E. Joe, M.-J. Choe, and B.-S. Song, "A 5-MHz IF digital FM demodulator," Solid-State Circuits, IEEE Journal of, vol. 34, no.1, pp. 3-11, 1999.
[43] A. A. Seshia, "Integrated micomechanical resonant sensors for inertial measurement systems," P.h.D. Thesis, Department of Electrical Engineering and Computer Science, University of California, Berkeley, 2002.
[44] G. Chien, "Low-noise local oscillator design techniques using a DLL-based frequency multiplier for wireless applications," P.h.D. Thesis, Department of Electrical Engineering and Computer Science, University of California, Berkeley, CA, 2000, pp. 46-51.
[45] R. Nutt, "Digital time interval meter," Rev. Sci. Instrum, vol. 39, pp. 1342-1345, 1968.
[46] R. Szplet, J. Kalisz, and R. Szymanowski, "Interpolating time counter with 100 ps resolution on a single FPGA device," IEEE Transactions on Instrumentation and Measurement, vol. 49, no.4, pp. 879-883, 2000.

Bibliography

136

[47] M. Mota and J. Christiansen, "A high-resolution time interpolator based on a delay locked loop and an RC delay line," IEEE Journal of Solid-State Circuits, vol. 34, no.10, pp. 1360-1366, 1999.
[48] I. Galton and G. Zimmerman, "Combined RF phase extraction and digitization," Technical Digest, IEEE International Circuits and Systems, pp. 1104-1107 vol.2, 1993.
[49] V. P. Petkov, "High-Order  Interface for Micromachined Inertial Sensors," P.h.D Thesis, Dept. of Electrical Engineering and Computer Sciences, University of California, Berkeley, 2004, pp. 43-46.
[50] I. Galton, W. Huff, P. Carbone, and E. Siragusa, "A delta-sigma PLL for 14-b, 50 kSample/s frequency-to-digital conversion of a 10 MHz FM signal," IEEE Journal of Solid-State Circuits, vol. 33, no.12, pp. 2042-2053, 1998.
[51] V. P. Petkov and B. E. Boser, "A fourth-order  interface for micromachined inertial sensors," IEEE Journal of Solid-State Circuits,, vol. 40, no.8, pp. 16021609, 2005.
[52] V. P. Petkov, "High-Order  Interface for Micromachined Inertial Sensors," P.h.D Thesis, Dept. of Electrical Engineering and Computer Sciences, University of California, Berkeley, 2004, pp. 46-51.
[53] "TDA7513T: Single-chip FM/AM Tuner with stereo decoder and audio processor," STMicroelectronics, Datasheet 2004.
[54] D. E. Muller and W. S. Bartky, "A theroy of asynchronous circuits," Technical Digest, International Symposium on the theory of switching, pp. 204-243, 1959.
[55] D. H. Wolaver, Phase-Locked Loop Circuit Design. Upper Saddle River, NJ: Prentice-Hall Inc., pp. 62-65, 1991.
[56] V. P. Petkov, "High-Order  Interface for Micromachined Inertial Sensors," P.h.D Thesis, Dept. of Electrical Engineering and Computer Sciences, University of California, Berkeley, 2004.
[57] G. F. Franklin, J. D. Powell, and A. Emami-Naeini, Feedback Control of Dynamic Systems, Third ed: Addison-Wesley Publishing Co., pp. 634, 1994.
[58] www.xilinx.com, "PQ240-110 Prototype Platform (HW-AFX-PQ240-110): Xilinix development board."
[59] K. Philips, P. A. C. M. Nuijten, R. L. J. Roovers, A. H. M. van Roermund, F. M. Chavero, M. T. Pallares, and A. Torralba, "A continuous-time  ADC with

Bibliography

137

increased immunity to interferers," IEEE Journal of Solid-State Circuits, vol. 39, no.12, pp. 2170-2178, 2004.
[60] J. A. E. P. Van Engelen, R. J. Van De Plassche, E. Stikvoort, and A. G. Venes, "A sixth-order continuous-time bandpass sigma-delta modulator for digital radio IF," IEEE Journal of Solid-State Circuits, vol. 34, no.12, pp. 1753-1764, 1999.
[61] E. J. van der Zwan, K. Philips, and C. A. A. Bastiaansen, "A 10.7-MHz IF-tobaseband  A/D conversion system for AM/FM radio receivers," IEEE Journal of Solid-State Circuits, vol. 35, no.12, pp. 1810-1819, 2000.
[62] J. Park, E. Joe, M.-J. Choe, and B.-S. Song, "A 5-MHz IF digital FM demodulator," IEEE Journal of Solid-State Circuits, vol. 34, no.1, pp. 3-11, 1999.
[63] Personal Communication with Baris Cagdaser.

